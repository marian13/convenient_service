# frozen_string_literal: true

##
# @author Marian Kostyk <mariankostyk13895@gmail.com>
# @license LGPLv3 <https://www.gnu.org/licenses/lgpl-3.0.html>
##

##
# TODO: Fix rubocop for `if ConvenientService::Dependencies.ruby.version > ...`.
#
# rubocop:disable all
# rubocop:disable RSpec/NestedGroups, RSpec/MultipleMemoizedHelpers, RSpec/DescribeClass, RSpec/ExampleLength, RSpec/MissingExampleGroupArgument, RSpec/MultipleExpectations
RSpec.describe "Loops", type: [:standard, :e2e] do
  include ConvenientService::RSpec::Matchers::Results

  example_group "enumerable" do
    let(:enumerable_class) do
      Class.new do
        include Enumerable

        attr_reader :collection

        def initialize(collection)
          @collection = collection
        end

        def each(&block)
          collection.each(&block)
        end

        def ==(other)
          return unless other.instance_of?(self.class)

          collection == other.collection
        end

        def self.name
          "Enumerable"
        end
      end
    end

    example_group "instance methods" do
      let(:service_class) do
        Class.new do
          include ConvenientService::Standard::Config
        end
      end

      let(:service) { service_class.new }

      let(:status_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :status

          def initialize(status:)
            @status = status
          end

          def result
            case status
            when :success then success(status_string: "ok", status_code: 200)
            when :failure then failure
            when :error then error
            when :exception then raise
            else
              raise
            end
          end

          def self.name
            "StatusService"
          end
        end
      end

      let(:statuses_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :statuses

          def initialize(statuses:)
            @statuses = statuses
          end

          def result
            if statuses.include?(:exception)
              raise
            elsif statuses.include?(:error)
              error
            elsif statuses.include?(:failure)
              failure
            elsif statuses.uniq.include?(:success)
              success(status_string: "ok", status_code: 200)
            else
              raise
            end
          end

          def self.name
            "StatusesService"
          end
        end
      end

      let(:number_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :number

          def initialize(number:)
            @number = number
          end

          ##
          # NOTE: `number_code` is ASCII Code.
          #
          def result
            case number
            when 0 then failure
            when 1 then success(number_string: "one", number_code: 49)
            when 2 then success(number_string: "two", number_code: 50)
            when 3 then success(number_string: "three", number_code: 51)
            when 4 then success(number_string: "four", number_code: 52)
            when 5 then success(number_string: "five", number_code: 53)
            when -Float::INFINITY..-1 then error
            else
              raise
            end
          end

          def self.name
            "NumberService"
          end
        end
      end

      let(:numbers_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :numbers

          def initialize(numbers:)
            @numbers = numbers
          end

          ##
          # NOTE: `number_code` is ASCII Code.
          #
          def result
            return error if numbers.any? { |number| (-Float::INFINITY..-1).cover?(number) }
            return failure if numbers.any? { |number| number == 0 }

            formatted_numbers =
              numbers.map do |number|
                case number
                when 1 then {string: "one", code: 49}
                when 2 then {string: "two", code: 50}
                when 3 then {string: "three", code: 51}
                when 4 then {string: "four", code: 52}
                when 5 then {string: "five", code: 53}
                else
                  raise
                end
              end

            success(number_strings: formatted_numbers.map { |number| number[:string] }, number_codes: formatted_numbers.map { |number| number[:code] })
          end

          def self.name
            "NumbersService"
          end
        end
      end

      let(:status_with_number_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :status, :number

          step :number_result

          step :status_result

          def initialize(status:, number:)
            @status = status
            @number = number
          end

          def status_result
            case status
            when :success then success(status_string: "ok", status_code: 200)
            when :failure then failure
            when :error then error
            when :exception then raise
            else
              raise
            end
          end

          ##
          # NOTE: `number_code` is ASCII Code.
          #
          def number_result
            case number
            when 0 then failure
            when 1 then success(number_string: "one", number_code: 49)
            when 2 then success(number_string: "two", number_code: 50)
            when 3 then success(number_string: "three", number_code: 51)
            when 4 then success(number_string: "four", number_code: 52)
            when 5 then success(number_string: "five", number_code: 53)
            when -Float::INFINITY..-1 then error
            else
              raise
            end
          end

          def self.name
            "StatusWithNumberService"
          end
        end
      end

      let(:compare_numbers_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :number, :other_number

          def initialize(number:, other_number:)
            @number = number
            @other_number = other_number
          end

          ##
          # NOTE: `number_code` is ASCII Code.
          #
          def result
            return error if [number, other_number].any? { |value| (-Float::INFINITY..-1).cover?(value) }
            return failure if [number, other_number].any? { |value| value == 0 }

            case number <=> other_number
            when -1
              success(integer: -1, operator: "<")
            when 1
              success(integer: 1, operator: ">")
            when 0
              success(integer: 0, operator: "=")
            else
              raise
            end
          end

          def self.name
            "CompareNumbersService"
          end
        end
      end

      let(:add_numbers_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :number, :other_number

          def initialize(number:, other_number:)
            @number = number
            @other_number = other_number
          end

          def result
            return error if [number, other_number].any? { |value| (-Float::INFINITY..-1).cover?(value) }

            success(sum: number + other_number, operator: "+")
          end

          def self.name
            "AddNumbersService"
          end
        end
      end

      let(:concat_strings_service) do
        Class.new do
          include ConvenientService::Standard::Config

          attr_reader :string, :other_string

          def initialize(string:, other_string:)
            @string = string
            @other_string = other_string
          end

          def result
            return error if other_string.include?("-")
            return failure if other_string.include?("0")

            success(concatenation: string.concat(other_string), operator: "concat")
          end

          def self.name
            "ConcatStringsService"
          end
        end
      end

      let(:status_condition) do
        proc do |status|
          case status
          when :success then true
          when :failure then false
          when :error then raise
          when :exception then raise
          else
            raise
          end
        end
      end

      let(:number_condition) do
        proc do |status|
          case status
          when (1..Float::INFINITY) then true
          when 0 then false
          when (-Float::INFINITY..-1) then raise
          else
            raise
          end
        end
      end

      def enumerable(collection)
        enumerable_class.new(collection)
      end

      def enumerator(collection)
        collection.each
      end

      def lazy_enumerator(collection)
        collection.lazy
      end

      def chain_enumerator(collection)
        collection.chain
      end

      def set(collection)
        Set.new(collection)
      end

      def step(...)
        service.step(...)
      end

      def concat_strings(first_string, second_string)
        return if second_string.include?("0")

        first_string.concat(second_string)
      end

      describe "#result" do
        specify do
          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
          expect(service.service_aware_enumerable((0..5)).result).to be_success.with_data(values: (0..5))
          expect(service.service_aware_enumerator((5..0).step(-1)).result).to be_success.with_data(values: (5..0).step(-1))
        end
      end

      describe "#service_aware_each" do
        specify do
          # NOTE: Empty collection.
          expect([].each { |status| status_condition[status] }).to eq([])
          expect(set([]).each { |status| status_condition[status] }).to eq(set([]))
          expect({}.each { |(key, value)| status_condition[value] }).to eq({})
          expect((:success...:success).each { |status| status_condition[status] }).to eq((:success...:success))
          expect((0...0).step(-1).each { |number| number_condition[number] }).to eq((0...0).step(-1))

          expect(service.service_aware_enumerable(enumerable([])).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: set([]))
          expect(service.service_aware_enumerable({}).service_aware_each { |(key, value)| status_condition[value] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_each { |status| status_condition[status] }.result).to be_success.with_data(values: (:success...:success))
          expect(service.service_aware_enumerator((0...0).step(-1)).each { |number| number_condition[number] }.result).to be_success.with_data(values: (0...0).step(-1))

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].each.to_a).to eq([0, 1, 2, 3, 4, 5])
          expect(lazy_enumerator([0, 1, 2, 3, 4, 5]).each.to_a).to eq([0, 1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((0..5)).service_aware_each.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator((5..0).step(-1)).service_aware_each.result).to be_success.with_data(values: (5..0).step(-1))

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].each { |number| number_condition[number] }).to eq([0, 1, 2, 3, 4, 5])
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.each { |key, value| number_condition[value] }.to_h).to eq({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each { |number| number_condition[number] }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each { |number| number_condition[number] }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each { |number| number_condition[number] }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each { |number| number_condition[number] }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each { |number| number_condition[number] }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each { |number| number_condition[number] }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each { |key, value| number_condition[value] }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
          expect(service.service_aware_enumerable((0..5)).each { |number| number_condition[number] }.result).to be_success.with_data(values: (0..5))
          expect(service.service_aware_enumerator((5..0).step(-1)).each { |number| number_condition[number] }.result).to be_success.with_data(values: (5..0).step(-1))

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.each { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.each { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_all?" do
        specify do
          # NOTE: Empty collection.
          expect([].all?).to eq(true)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable([]).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable({}).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_all?.result).to be_success.without_data

          # NOTE: No block, no pattern.
          expect([:success].all?).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success]).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success])).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_all?.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_all?.result).to be_success.without_data

          # NOTE: Matched pattern.
          expect([:success, :success, :success].all?(/success/)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :success, :success])).service_aware_all?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_all?([:success, :success]).result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_all?(/success/).result).to be_success.without_data

          # NOTE: Not matched pattern.
          expect([:success, :failure, :exception].all?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_all?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_all?([:success, :success]).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_all?(/success/).result).to be_failure.without_data

          # NOTE: Matched block.
          expect([:success, :success, :success].all? { |status| status_condition[status] }).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :success, :success]).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :success, :success])).all? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).all? { |key, value| status_condition[value] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).all? { |status| status_condition[status] }.result).to be_success.without_data

          # NOTE: Not matched block.
          expect([:success, :failure, :exception].all? { |status| status_condition[status] }).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).all? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).all? { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).all? { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :success, :success])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_all? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_all? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_all? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_all?.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_all?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_all?.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_all?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_any?" do
        specify do
          # NOTE: Empty collection.
          expect([].any?).to eq(false)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_any?.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_any?.result).to be_failure.without_data

          # NOTE: No block, no pattern.
          expect([:success].any?).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success]).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success])).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_any?.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_any?.result).to be_success.without_data

          # NOTE: Matched pattern.
          expect([:success, :failure, :exception].any?(/success/)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :exception])).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :exception])).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :exception])).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :exception])).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable([:success, :failure, :exception]).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_any?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_any?([:success, :success]).result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_any?(/success/).result).to be_success.without_data

          # NOTE: Not matched pattern.
          expect([:failure, :failure, :failure].any?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_any?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_any?([:success, :success]).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_any?(/success/).result).to be_failure.without_data

          # NOTE: Matched block.
          expect([:failure, :success, :exception].any? { |status| status_condition[status] }).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).any? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).any? { |key, value| status_condition[value] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).any? { |status| status_condition[status] }.result).to be_success.without_data

          # NOTE: Not matched block.
          expect([:failure, :failure, :failure].any? { |status| status_condition[status] }).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).any? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).any? { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).any? { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_any? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_any? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_any? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_any?.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_any?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_any?.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_any?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#chain" do
        specify do
          # NOTE: Empty collection.
          expect([].chain([2]).to_a).to eq([2])

          expect(service.service_aware_enumerable(enumerable([])).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(enumerator([])).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(lazy_enumerator([])).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(chain_enumerator([])).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable([]).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable(set([])).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable({}).chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable((1...1)).chain([2]).result).to be_success.with_data(values: [2])

          # No argument.
          expect([1].chain.to_a).to eq([1])
          expect({1 => 1}.chain.to_a).to eq([[1, 1]])

          expect(service.service_aware_enumerable(enumerable([1])).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(enumerator([1])).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(chain_enumerator([1])).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable([1]).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable(set([1])).chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable({1 => 1}).chain.result).to be_success.with_data(values: [[1, 1]])
          expect(service.service_aware_enumerable((1..1)).chain.result).to be_success.with_data(values: [1])

          # One argument.
          expect([1].chain([2]).to_a).to eq([1, 2])
          expect({1 => 1}.chain([2]).to_a).to eq([[1, 1], 2])
          expect({1 => 1}.chain({2 => 2}).to_a).to eq([[1, 1], [2, 2]])

          expect(service.service_aware_enumerable(enumerable([1])).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(enumerator([1])).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(chain_enumerator([1])).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable([1]).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable(set([1])).chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable({1 => 1}).chain([2]).result).to be_success.with_data(values: [[1, 1], 2])
          expect(service.service_aware_enumerable({1 => 1}).chain({2 => 2}).result).to be_success.with_data(values: [[1, 1], [2, 2]])
          expect(service.service_aware_enumerable((1..1)).chain([2]).result).to be_success.with_data(values: [1, 2])

          # Multiple arguments.
          expect([1].chain([2], [3]).to_a).to eq([1, 2, 3])
          expect({1 => 1}.chain([2], [3]).to_a).to eq([[1, 1], 2, 3])
          expect({1 => 1}.chain({2 => 2}, {3 => 3}).to_a).to eq([[1, 1], [2, 2], [3, 3]])

          expect(service.service_aware_enumerable(enumerable([1])).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1])).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1])).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1]).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1])).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1}).chain([2], [3]).result).to be_success.with_data(values: [[1, 1], 2, 3])
          expect(service.service_aware_enumerable({1 => 1}).chain({2 => 2}, {3 => 3}).result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..1)).chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data

          ##
          # HACK: `Enumerator::Lazy.chain` returns `Enumetator::Chain` in JRuby.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Chain)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          elsif ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Lazy)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          else
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Chain)
            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_success.with_data(values: [2, 3])
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          end

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_chain([2], [3]).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_chain" do
        specify do
          # NOTE: Empty collection.
          expect([].chain([2]).to_a).to eq([2])

          expect(service.service_aware_enumerable(enumerable([])).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(enumerator([])).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(lazy_enumerator([])).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerator(chain_enumerator([])).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable([]).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable(set([])).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable({}).step_aware_chain([2]).result).to be_success.with_data(values: [2])
          expect(service.service_aware_enumerable((1...1)).step_aware_chain([2]).result).to be_success.with_data(values: [2])

          # No argument.
          expect([1].chain.to_a).to eq([1])
          expect({1 => 1}.chain.to_a).to eq([[1, 1]])

          expect(service.service_aware_enumerable(enumerable([1])).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(enumerator([1])).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(chain_enumerator([1])).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable([1]).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable(set([1])).step_aware_chain.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable({1 => 1}).step_aware_chain.result).to be_success.with_data(values: [[1, 1]])
          expect(service.service_aware_enumerable((1..1)).step_aware_chain.result).to be_success.with_data(values: [1])

          # One argument.
          expect([1].chain([2]).to_a).to eq([1, 2])
          expect({1 => 1}.chain([2]).to_a).to eq([[1, 1], 2])
          expect({1 => 1}.chain({2 => 2}).to_a).to eq([[1, 1], [2, 2]])

          expect(service.service_aware_enumerable(enumerable([1])).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(enumerator([1])).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(chain_enumerator([1])).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable([1]).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable(set([1])).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable({1 => 1}).step_aware_chain([2]).result).to be_success.with_data(values: [[1, 1], 2])
          expect(service.service_aware_enumerable({1 => 1}).step_aware_chain({2 => 2}).result).to be_success.with_data(values: [[1, 1], [2, 2]])
          expect(service.service_aware_enumerable((1..1)).step_aware_chain([2]).result).to be_success.with_data(values: [1, 2])

          # Multiple arguments.
          expect([1].chain([2], [3]).to_a).to eq([1, 2, 3])
          expect({1 => 1}.chain([2], [3]).to_a).to eq([[1, 1], 2, 3])
          expect({1 => 1}.chain({2 => 2}, {3 => 3}).to_a).to eq([[1, 1], [2, 2], [3, 3]])

          expect(service.service_aware_enumerable(enumerable([1])).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1])).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1])).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1]).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1])).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1}).step_aware_chain([2], [3]).result).to be_success.with_data(values: [[1, 1], 2, 3])
          expect(service.service_aware_enumerable({1 => 1}).step_aware_chain({2 => 2}, {3 => 3}).result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..1)).step_aware_chain([2], [3]).result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_error.without_data

          ##
          # HACK: `Enumerator::Lazy.chain` returns `Enumetator::Chain` in JRuby.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Chain)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          elsif ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Lazy)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          else
            # NOTE: Failure propagation.
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3]).to_a).to eq([2, 3])
            expect(lazy_enumerator([:failure, :failure, :failure]).select { |status| status_condition[status] }.chain([2], [3])).to be_instance_of(Enumerator::Chain)
            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_success.with_data(values: [2, 3])
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chain([2], [3]).result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chain([2], [3]).result).to be_failure.without_data
          end

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_chain([2], [3]).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_chain([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_chunk" do
        specify do
          # NOTE: Empty collection.
          expect([].chunk { |status| status_condition[status] }.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].chunk.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([:success])).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success}).service_aware_chunk.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk.result).to be_success.with_data(values: [])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].chunk { |status| status_condition[status] }.to_a).to eq([[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable(set([:success, :failure])).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).chunk { |key, value| status_condition[value] }.result).to be_success.with_data(values: [[true, [[:success, :success]]], [false, [[:failure, :failure]]]])
          expect(service.service_aware_enumerable((:success..:success)).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[true, [:success]]])
          expect(service.service_aware_enumerable((:failure..:failure)).chunk { |status| status_condition[status] }.result).to be_success.with_data(values: [[false, [:failure]]])

          # NOTE: nil, separator, alone.
          expect([nil, :success, :_separator, :failure, :_alone].chunk { |status| status }.to_a).to eq([[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])

          expect(service.service_aware_enumerable(enumerable([nil, :success, :_separator, :failure, :_alone])).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerator(enumerator([nil, :success, :_separator, :failure, :_alone])).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerator(lazy_enumerator([nil, :success, :_separator, :failure, :_alone])).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerator(chain_enumerator([nil, :success, :_separator, :failure, :_alone])).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerable([nil, :success, :_separator, :failure, :_alone]).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerable(set([nil, :success, :_separator, :failure, :_alone])).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]], [:failure, [:failure]], [:_alone, [:_alone]]])
          expect(service.service_aware_enumerable({nil => nil, :success => :success, :_separator => :_separator, :failure => :failure, :_alone => :_alone}).chunk { |key, value| value }.result).to be_success.with_data(values: [[:success, [[:success, :success]]], [:failure, [[:failure, :failure]]], [:_alone, [[:_alone, :_alone]]]])
          expect(service.service_aware_enumerable([nil]).chunk { |status| status }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success..:success)).chunk { |status| status }.result).to be_success.with_data(values: [[:success, [:success]]])
          expect(service.service_aware_enumerable((:_separator..:_separator)).chunk { |status| status }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).chunk { |status| status }.result).to be_success.with_data(values: [[:failure, [:failure]]])
          expect(service.service_aware_enumerable((:_alone..:_alone)).chunk { |status| status }.result).to be_success.with_data(values: [[:_alone, [:_alone]]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]], [true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]], [false, [:failure]]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[true, [[:success, :success]]], [false, [[:failure, :failure]]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[true, [:success]]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[false, [:failure]]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]], ["ok", [:success]]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]], ["ok", [:success]]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]], ["ok", [:success]]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]], ["ok", [:success]]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]], ["ok", [:success]]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [["ok", [[:success, :success]]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [["ok", [:success]]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]], [{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]], [{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]], [{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]], [{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]], [{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [[:success, :success]]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[{status_string: "ok", status_code: 200}, [:success]]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_chunk { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_chunk { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.chunk { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.chunk { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.chunk { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_chunk { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_chunk { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_chunk_while" do
        specify do
          # NOTE: Empty collection.
          expect([].chunk_while { raise }.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_chunk_while { raise }.result).to be_success.with_data(values: [])

          ##
          # HACK: JRuby has different exception message.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block.
            expect { [:success, :success, :success].chunk_while.to_a }.to raise_error(ArgumentError).with_message("missing block")

            expect { service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable([:success, :success, :success]).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable(set([:success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable({success: :success}).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable((:success..:success)).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("missing block")
          else
            # NOTE: No block.
            expect { [:success, :success, :success].chunk_while.to_a }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")

            expect { service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable([:success, :success, :success]).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable(set([:success])).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable({success: :success}).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable((:success..:success)).service_aware_chunk_while.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
          end

          # NOTE: Block with one argument.
          expect([:success, :failure, :success, :failure].chunk_while { |status| status_condition[status] }.to_a).to eq([[:success, :failure], [:success, :failure]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure], [:success, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure], [:success, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure], [:success, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure], [:success, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure], [:success, :failure]])
          expect(service.service_aware_enumerable(set([:success, :failure])).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).chunk_while { |(key, value)| status_condition[value] }.result).to be_success.with_data(values: [[[:success, :success], [:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable((:failure..:failure)).chunk_while { |status| status_condition[status] }.result).to be_success.with_data(values: [[:failure]])

          # NOTE: Block with multiple arguments.
          expect([:success, :failure, :success, :failure].chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.to_a).to eq([[:success, :failure, :success, :failure]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure, :success, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure, :success, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure, :success, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure, :success, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure, :success, :failure]])
          expect(service.service_aware_enumerable(set([:success, :failure])).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success, :failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).chunk_while { |(key, value), (other_key, other_value)| [value, other_value].map(&status_condition) }.result).to be_success.with_data(values: [[[:success, :success], [:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable((:failure..:failure)).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.result).to be_success.with_data(values: [[:failure]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk_while { |(key, value), (other_key, other_value)| step statuses_service, in: [statuses: -> { [value, other_value] }] }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:failure]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk_while { |(key, value), (other_key, other_value)| step statuses_service, in: [statuses: -> { [value, other_value] }], out: :status_string }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: :status_string }.result).to be_success.with_data(values: [[:failure]])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure], [:success], [:failure]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_chunk_while { |(key, value), (other_key, other_value)| step statuses_service, in: [statuses: -> { [value, other_value] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:failure]])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_chunk_while { |(key, value), (other_key, other_value)| step statuses_service, in: [statuses: -> { [value, other_value] }] }.result).to be_error.without_data
          expect((:error..:error).chunk_while { |status, other_status| [status, other_status].map(&status_condition) }.to_a).to eq([[:error]])
          expect(service.service_aware_enumerable((:error..:error)).service_aware_chunk_while { |status, other_status| step statuses_service, in: [statuses: -> { [status, other_status] }] }.result).to be_success.with_data(values: [[:error]])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_chunk_while { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_chunk_while { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_chunk_while { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_chunk_while { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_chunk_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_collect" do
        specify do
          # NOTE: Empty collection.
          expect([].collect { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_collect { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          ##
          # HACK: JRuby raises `"tried to call lazy collect without a block"` instead of `"tried to call lazy map without a block"`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block.
            expect([:success, :success, :success].collect.to_a).to eq([:success, :success, :success])

            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect.result }.to raise_error(ArgumentError).with_message("tried to call lazy collect without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_collect.result).to be_success.with_data(values: [:success])
            expect(service.service_aware_enumerable({success: :success}).service_aware_collect.result).to be_success.with_data(values: [[:success, :success]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_collect.result).to be_success.with_data(values: [:success])
          else
            # NOTE: No block.
            expect([:success, :success, :success].collect.to_a).to eq([:success, :success, :success])

            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect.result }.to raise_error(ArgumentError).with_message("tried to call lazy map without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_collect.result).to be_success.with_data(values: [:success])
            expect(service.service_aware_enumerable({success: :success}).service_aware_collect.result).to be_success.with_data(values: [[:success, :success]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_collect.result).to be_success.with_data(values: [:success])
          end

          # NOTE: Block.
          expect([:success, :success, :success].collect { |status| status_condition[status] }).to eq([true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable(set([:success])).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).collect { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).collect { |status| status_condition[status] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_collect { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_collect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.collect { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.collect { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_collect { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_collect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_collect_concat" do
        specify do
          # NOTE: Empty collection.
          expect([].collect_concat { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].collect_concat.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect_concat.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect_concat.result).to be_success.with_data(values: [:success, :success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect_concat.result }.to raise_error(ArgumentError).with_message("tried to call lazy flat_map without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect_concat.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect_concat.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success, :success, :success])).service_aware_collect_concat.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect_concat.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect_concat.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :success, :success].collect_concat { |status| status_condition[status] }).to eq([true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable(set([:success])).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).collect_concat { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).collect_concat { |status| status_condition[status] }.result).to be_success.with_data(values: [true])

          # NOTE: Flatten.
          expect([:success, :success, :success].collect_concat { |status| [status_condition[status], status_condition[status]] }).to eq([true, true, true, true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerable(set([:success])).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable({success: :success}).collect_concat { |key, value| [status_condition[value], status_condition[value]] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable((:success..:success)).collect_concat { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect_concat { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect_concat { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable(set([:success])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({success: :success}).service_aware_collect_concat { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_collect_concat { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_collect_concat { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.collect_concat { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.collect_concat { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.collect_concat { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_collect_concat { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_collect_concat { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      if ConvenientService::Dependencies.ruby.version >= 3.1
        describe "#compact" do
          specify do
            # NOTE: Empty collection.
            expect([].compact).to eq([])

            expect(service.service_aware_enumerable(enumerable([])).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(enumerator([])).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).compact.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable({}).compact.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).compact.result).to be_success.with_data(values: [])

            # NOTE: No block.
            expect([:success, nil, :success, false].compact.to_a).to eq([:success, :success, false])
            expect({:success => :success, nil => nil, false => false}.compact).to eq({:success => :success, false => false})

            expect(service.service_aware_enumerable(enumerable([:success, nil, :success, false])).compact.result).to be_success.with_data(values: [:success, :success, false])
            expect(service.service_aware_enumerator(enumerator([:success, nil, :success, false])).compact.result).to be_success.with_data(values: [:success, :success, false])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, nil, :success, false])).compact.result).to be_success.with_data(values: [:success, :success, false])
            expect(service.service_aware_enumerator(chain_enumerator([:success, nil, :success, false])).compact.result).to be_success.with_data(values: [:success, :success, false])
            expect(service.service_aware_enumerable([:success, nil, :success, false]).compact.result).to be_success.with_data(values: [:success, :success, false])
            expect(service.service_aware_enumerable(set([:success, nil, false])).compact.result).to be_success.with_data(values: [:success, false])
            expect(service.service_aware_enumerable({:success => :success, nil => nil, false => false}).compact.result).to be_success.with_data(values: {:success => :success, false => false})
            expect(service.service_aware_enumerable((:success..:success)).compact.result).to be_success.with_data(values: [:success])

            # NOTE: Error propagation.
            expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.compact.result).to be_error.without_data
            expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_error.without_data

            # NOTE: Failure propagation.
            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.compact.result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.compact.result).to be_failure.without_data

            # NOTE: Usage on terminal chaining.
            expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_compact { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
            expect { service.service_aware_enumerable((:success..:success)).first.service_aware_compact.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          end
        end
      end

      # rubocop:disable Performance/Size
      describe "#service_aware_count" do
        specify do
          # NOTE: Empty collection.
          expect([].count).to eq(0)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(enumerator([])).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable([]).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable(set([])).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable({}).service_aware_count.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success...:success)).service_aware_count.result).to be_success.with_data(value: 0)

          # NOTE: No block, no pattern.
          expect([:success, :success].count).to eq(2)

          expect(service.service_aware_enumerable(enumerable([:success, :success])).service_aware_count.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(enumerator([:success, :success])).service_aware_count.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).service_aware_count.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).service_aware_count.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable([:success, :success]).service_aware_count.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable(set([:success])).service_aware_count.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).service_aware_count.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_count.result).to be_success.with_data(value: 1)

          ##
          # HACK: JRuby raises exception for one element range.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby >= 9.5") && ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Item.
            expect([:success, :failure, :success, :failure].count(:success)).to eq(2)
            expect { (:success..:success).count(:success) }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 1, expected 0)")
            expect { (:failure..:failure).count(:success) }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 1, expected 0)")

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 1)
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count([:success, :success]).result).to be_success.with_data(value: 1)
            expect { service.service_aware_enumerable((:success..:success)).service_aware_count(:success).result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 1, expected 0)")
            expect { service.service_aware_enumerable((:failure..:failure)).service_aware_count(:success).result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 1, expected 0)")
          elsif ConvenientService::Dependencies.ruby.match?("jruby < 9.5")
            # NOTE: Item.
            expect([:success, :failure, :success, :failure].count(:success)).to eq(2)
            expect { (:success..:success).count(:success) }.to raise_error(ArgumentError).with_message("`count': wrong number of arguments (given 1, expected 0)")
            expect { (:failure..:failure).count(:success) }.to raise_error(ArgumentError).with_message("`count': wrong number of arguments (given 1, expected 0)")

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 1)
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count([:success, :success]).result).to be_success.with_data(value: 1)
            expect { service.service_aware_enumerable((:success..:success)).service_aware_count(:success).result }.to raise_error(ArgumentError).with_message("`count': wrong number of arguments (given 1, expected 0)")
            expect { service.service_aware_enumerable((:failure..:failure)).service_aware_count(:success).result }.to raise_error(ArgumentError).with_message("`count': wrong number of arguments (given 1, expected 0)")
          else
            # NOTE: Item.
            expect([:success, :failure, :success, :failure].count(:success)).to eq(2)
            expect((:success..:success).count(:success)).to eq(1)
            expect((:failure..:failure).count(:success)).to eq(0)

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count(:success).result).to be_success.with_data(value: 2)
            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count(:success).result).to be_success.with_data(value: 1)
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count([:success, :success]).result).to be_success.with_data(value: 1)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_count(:success).result).to be_success.with_data(value: 1)
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_count(:success).result).to be_success.with_data(value: 0)
          end

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].count { |status| status_condition[status] }).to eq(2)

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).count { |status| status_condition[status] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).count { |status| status_condition[status] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).count { |status| status_condition[status] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).count { |status| status_condition[status] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).count { |status| status_condition[status] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable(set([:success, :failure])).count { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).count { |key, value| status_condition[value] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:success..:success)).count { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:failure..:failure)).count { |status| status_condition[status] }.result).to be_success.with_data(value: 0)

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 0)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_count { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 0)

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 2)
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_count { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_count { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 0)

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_count { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_count { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_count { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_count { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_count.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end
      # rubocop:enable Performance/Size

      describe "#service_aware_cycle" do
        specify do
          # NOTE: Empty collection.
          expect([].cycle(2) { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([])).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([]).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([])).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({}).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((:success...:success)).service_aware_cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)

          # NOTE: No block.
          expect([:success, :success].cycle(2).to_a).to eq([:success, :success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success])).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success])).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success]).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_cycle(2).result).to be_success.with_data(values: [[:success, :success], [:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_cycle(2).result).to be_success.with_data(values: [:success, :success])

          # NOTE: Block.
          expect([:success, :success].cycle(2) { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([:success, :success])).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([:success, :success])).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([:success, :success]).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([:success])).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({success: :success}).cycle(2) { |key, value| status_condition[value] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((:success..:success)).cycle(2) { |status| status_condition[status] }.result).to be_success.with_data(value: nil)

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([:success, :success]).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([:success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({success: :success}).service_aware_cycle(2) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: nil)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([:success, :success]).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([:success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({success: :success}).service_aware_cycle(2) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: nil)

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([:success, :success]).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([:success])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({success: :success}).service_aware_cycle(2) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: nil)

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_cycle(2) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_cycle(2) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.cycle(2) { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.cycle(2) { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.cycle(2) { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_cycle(2) { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_cycle(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_detect" do
        specify do
          # NOTE: Empty collection.
          expect([].detect { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_detect { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: No block.
          expect([:success].detect.to_a).to eq([:success])

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success]).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_detect.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_detect.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_detect.result).to be_success.with_data(values: [:success])

          # NOTE: Matched block.
          expect([:failure, :success, :exception].detect { |status| status_condition[status] }).to eq(:success)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)

          expect(service.service_aware_enumerable({success: :success}).detect { |key, value| status_condition[value] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).detect { |status| status_condition[status] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched block.
          expect([:failure, :failure, :failure].detect { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).detect { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).detect { |status| status_condition[status] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).detect { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).detect { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Not matched block with ifnode.
          expect([:failure, :failure, :failure].detect(-> { :default }) { |status| status_condition[status] }).to eq(:default)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)

          expect(service.service_aware_enumerable({failure: :failure}).detect(-> { :default }) { |key, value| status_condition[value] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).detect(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)

          expect(service.service_aware_enumerable({success: :success}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Not matched step with no outputs with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect(-> { :default }) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)

          expect(service.service_aware_enumerable({success: :success}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Not matched step with one output with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect(-> { :default }) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)

          expect(service.service_aware_enumerable({success: :success}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Not matched step with multiple outputs with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_detect(-> { :default }) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_detect(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_detect { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_detect { |key, value| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_detect { |key, value| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_detect { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_detect { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#drop" do
        specify do
          # NOTE: Empty collection.
          expect([].drop(2)).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).drop(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).drop(2).result).to be_success.with_data(values: [])

          # NOTE: 0.
          expect([:success, :success, :failure, :failure].drop(0)).to eq([:success, :success, :failure, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :failure])).drop(0).result).to be_success.with_data(values: [:success, :success, :failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :failure])).drop(0).result).to be_success.with_data(values: [:success, :success, :failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :failure])).drop(0).result).to be_success.with_data(values: [:success, :success, :failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :failure])).drop(0).result).to be_success.with_data(values: [:success, :success, :failure, :failure])
          expect(service.service_aware_enumerable([:success, :success, :failure, :failure]).drop(0).result).to be_success.with_data(values: [:success, :success, :failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).drop(0).result).to be_success.with_data(values: [:success, :failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).drop(0).result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable((:success..:success)).drop(0).result).to be_success.with_data(values: [:success])

          # NOTE: n.
          expect([:success, :success, :failure, :failure].drop(2)).to eq([:failure, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :failure])).drop(2).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :failure])).drop(2).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :failure])).drop(2).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :failure])).drop(2).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:success, :success, :failure, :failure]).drop(2).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).drop(1).result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).drop(1).result).to be_success.with_data(values: [[:failure, :failure]])
          expect(service.service_aware_enumerable((:success..:success)).drop(1).result).to be_success.with_data(values: [])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.drop(2).result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.drop(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop(2).result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_drop(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_drop_while" do
        specify do
          # NOTE: Empty collection.
          expect([].drop_while { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].drop_while.to_a).to eq([:success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_drop_while.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_drop_while.result).to be_success.with_data(values: [:success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_drop_while.result }.to raise_error(ArgumentError).with_message("tried to call lazy drop_while without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_drop_while.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_drop_while.result).to be_success.with_data(values: [:success])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_drop_while.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :success, :failure, :exception].drop_while { |status| status_condition[status] }).to eq([:failure, :exception])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :exception])

          expect(service.service_aware_enumerable(set([:success, :failure])).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).drop_while { |key, value| status_condition[value] }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
          expect(service.service_aware_enumerable((:success..:success)).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).drop_while { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :exception])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :exception])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure])

          ##
          # HACK: For some reason in JRuby `Enumerator::Lazy#drop_while` does NOT stop after first falsy value.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Step with one output.
            expect([true, nil, true].drop_while { |value| value }.to_a).to eq([nil, true])
            expect([true, nil, true].lazy.drop_while { |value| value }.to_a).to eq([nil])

            expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])

            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
          else
            # NOTE: Step with one output.
            expect([true, nil, true].drop_while { |value| value }.to_a).to eq([nil, true])
            expect([true, nil, true].lazy.drop_while { |value| value }.to_a).to eq([nil, true])

            expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :exception])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])

            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])
            expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :exception])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:failure, :failure], [:exception, :exception]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
          end

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_drop_while { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_drop_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.drop_while { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.drop_while { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.drop_while { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_drop_while { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_drop_while { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_each_cons" do
        specify do
          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Empty collection.
            expect([].each_cons(2) { |status| status_condition[status] }).to eq([])
            expect(set([]).each_cons(2) { |status| status_condition[status] }).to eq(set([]))
            expect({}.each_cons(2) { |status| status_condition[status] }).to eq({})
            expect((:success...:success).each_cons(2) { |status| status_condition[status] }).to eq((:success...:success))

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: enumerable([]))
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: set([]))
            expect(service.service_aware_enumerable({}).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: (:success...:success))
          else
            # NOTE: Empty collection.
            expect([].each_cons(2) { |status| status_condition[status] }).to eq(nil)
            expect(set([]).each_cons(2) { |status| status_condition[status] }).to eq(nil)
            expect({}.each_cons(2) { |status| status_condition[status] }).to eq(nil)
            expect((:success...:success).each_cons(2) { |status| status_condition[status] }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([])).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([])).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([])).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({}).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success...:success)).each_cons(2) { |status| status_condition[status] }.result).to be_success.with_data(values: nil)
          end

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].each_cons(2).to_a).to eq([[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(lazy_enumerator([0, 1, 2, 3, 4, 5]).each_cons(2).to_a).to eq([[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each_cons(2).result).to be_success.with_data(values: [[[0, 0], [1, 1]], [[1, 1], [2, 2]], [[2, 2], [3, 3]], [[3, 3], [4, 4]], [[4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).service_aware_each_cons(2).result).to be_success.with_data(values: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5]])

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }).to eq([0, 1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_cons(2) { |numbers| numbers.map(&:last).map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
            expect(service.service_aware_enumerable((0..5)).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: (0..5))
            expect(service.service_aware_enumerable((0..0)).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: (0..0))
          else
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_cons(2) { |numbers| numbers.map(&:last).map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((0..5)).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((0..0)).each_cons(2) { |numbers| numbers.map(&:to_s).map(&:ord) }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with no outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with no outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with one output.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with one output.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_cons(2) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Error result.
            expect((:error..:error).each_cons(2) { raise }).to eq((:error..:error))

            expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable((:error..:error)).service_aware_each_cons(1) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data

            expect(service.service_aware_enumerable((:error..:error)).service_aware_each_cons(2) { raise }.result).to be_success.with_data(values: (:error..:error))
          else
            # NOTE: Error result.
            expect((:error..:error).each_cons(2) { raise }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each_cons(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable((:error..:error)).service_aware_each_cons(1) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
            expect(service.service_aware_enumerable((:error..:error)).service_aware_each_cons(2) { raise }.result).to be_success.with_data(values: nil)
          end

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_cons(2) { |statuses| statuses.map(&:last).service_aware_map(&status_condition) }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(1) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(2) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_cons(2) { |statuses| statuses.map(&:last).service_aware_map(&status_condition) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_cons(1) { |statuses| statuses.service_aware_map(&status_condition) }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each_cons(2) { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each_cons(2) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_each_entry" do
        specify do
          # NOTE: Empty collection.
          expect([].each_entry { |status| status_condition[status] }).to eq([])
          expect(set([]).each_entry { |status| status_condition[status] }).to eq(set([]))
          expect({}.each_entry { |status| status_condition[status] }).to eq({})
          expect((:success...:success).each_entry { |status| status_condition[status] }).to eq((:success...:success))

          expect(service.service_aware_enumerable(enumerable([])).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: enumerable([]))
          expect(service.service_aware_enumerator(enumerator([])).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: set([]))
          expect(service.service_aware_enumerable({}).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_each_entry { |status| status_condition[status] }.result).to be_success.with_data(values: (:success...:success))

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].each_entry.to_a).to eq([0, 1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each_entry.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((0..5)).service_aware_each_entry.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].each_entry { |number| number.even? }).to eq([0, 1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_entry { |number| number.even? }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_entry { |number| number.even? }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_entry { |number| number.even? }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each_entry { |number| number.even? }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_entry { |number| number.even? }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_entry { |number| number.even? }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_entry { |(key, value)| value.even? }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
          expect(service.service_aware_enumerable((0..5)).each_entry { |number| number.even? }.result).to be_success.with_data(values: (0..5))

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_entry { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_entry { |(key, value)| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_entry { |(key, value)| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_entry { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each_entry { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_each_entry { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.each_entry { |(key, value)| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.each_entry { |(key, value)| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_entry { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each_entry { |(key, value)| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each_entry { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_each_slice" do
        specify do
          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Empty collection.
            expect([].each_slice(2) { |numbers| numbers.map(&:even?) }).to eq([])
            expect(set([]).each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(set([]))
            expect({}.each_slice(2) { |numbers| numbers.map(&:even?) }).to eq({})
            expect((:success...:success).each_slice(2) { |numbers| numbers.map(&:even?) }).to eq((:success...:success))

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: enumerable([]))
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: set([]))
            expect(service.service_aware_enumerable({}).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: (:success...:success))
          else
            # NOTE: Empty collection.
            expect([].each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(nil)
            expect(set([]).each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(nil)
            expect({}.each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(nil)
            expect((:success...:success).each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([])).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({}).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
          end

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].each_slice(2).to_a).to eq([[0, 1], [2, 3], [4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each_slice(2).result).to be_success.with_data(values: [[[0, 0], [1, 1]], [[2, 2], [3, 3]], [[4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).service_aware_each_slice(2).result).to be_success.with_data(values: [[0, 1], [2, 3], [4, 5]])

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_slice(2) { |numbers| numbers.map(&:even?) }).to eq([0, 1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_slice(2) { |(key, value), index| value.to_s.ord }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
            expect(service.service_aware_enumerable((0..5)).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: (0..5))
          else
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_slice(2) { |numbers| numbers.map(&:even?) }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_slice(2) { |(key, value), index| value.to_s.ord }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((0..5)).each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with no outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }] }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with no outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with one output.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with one output.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }], out: :status_string }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: :status_string }.result).to be_success.with_data(values: nil)
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))
          else
            # NOTE: Step with multiple outputs.
            expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable(set([:success])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable({success: :success}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
            expect(service.service_aware_enumerable((:success..:success)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: nil)
          end

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses.map(&:last) }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_each_slice(2) { |statuses| step statuses_service, in: [statuses: -> { statuses }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_slice(2) { |(key, value), index| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_slice(2) { |(key, value), index| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each_slice(2) { |(key, value), index| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each_slice(2) { |numbers| numbers.map(&:even?) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_each_with_index" do
        specify do
          ##
          # HACK: JRuby does NOT raise exception for chain enumerators.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Empty collection.
            expect([].each_with_index { |status, index| index.abs }).to eq([])
            expect(set([]).each_with_index { |status, index| index.abs }).to eq(set([]))
            expect({}.each_with_index { |status, index| index.abs }).to eq({})
            expect((:success...:success).each_with_index { |status, index| index.abs }).to eq((:success...:success))
            expect(chain_enumerator([]).each_with_index { |status, index| index.abs }.to_a).to eq([])

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: enumerable([]))
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable([]).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: set([]))
            expect(service.service_aware_enumerable({}).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: (:success...:success))
          elsif ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Empty collection.
            expect([].each_with_index { |status, index| index.abs }).to eq([])
            expect(set([]).each_with_index { |status, index| index.abs }).to eq(set([]))
            expect({}.each_with_index { |status, index| index.abs }).to eq({})
            expect((:success...:success).each_with_index { |status, index| index.abs }).to eq((:success...:success))
            expect { chain_enumerator([]).each_with_index { |status, index| index.abs } }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: enumerable([]))
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect { service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable([]).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: set([]))
            expect(service.service_aware_enumerable({}).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: (:success...:success))
          else
            # NOTE: Empty collection.
            expect([].each_with_index { |status, index| index.abs }).to eq([])
            expect(set([]).each_with_index { |status, index| index.abs }).to eq(set([]))
            expect({}.each_with_index { |status, index| index.abs }).to eq({})
            expect((:success...:success).each_with_index { |status, index| index.abs }).to eq((:success...:success))
            expect { chain_enumerator([]).each_with_index { |status, index| index.abs } }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: enumerable([]))
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect { service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_index { |status, index| index.abs }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable([]).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: [])
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: set([]))
            expect(service.service_aware_enumerable({}).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: {})
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_index { |status, index| index.abs }.result).to be_success.with_data(values: (:success...:success))
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: No block.
            expect([0, 1, 2, 3, 4, 5].each_with_index.to_a).to eq([[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each_with_index.result).to be_success.with_data(values: [[[0, 0], 0], [[1, 1], 1], [[2, 2], 2], [[3, 3], 3], [[4, 4], 4], [[5, 5], 5]])
            expect(service.service_aware_enumerable((0..5)).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          else
            # NOTE: No block.
            expect([0, 1, 2, 3, 4, 5].each_with_index.to_a).to eq([[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_each_with_index.result).to be_success.with_data(values: [[[0, 0], 0], [[1, 1], 1], [[2, 2], 2], [[3, 3], 3], [[4, 4], 4], [[5, 5], 5]])
            expect(service.service_aware_enumerable((0..5)).service_aware_each_with_index.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          end

          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_with_index { |number, index| index.abs }).to eq([0, 1, 2, 3, 4, 5])
            expect(chain_enumerator([0, 1, 2, 3, 4, 5]).each_with_index { |status, index| index.abs }.to_a).to eq([0, 1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_with_index { |(key, value), index| value.to_s.ord }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
            expect(service.service_aware_enumerable((0..5)).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: (0..5))
          else
            # NOTE: Block.
            expect([0, 1, 2, 3, 4, 5].each_with_index { |number, index| index.abs }).to eq([0, 1, 2, 3, 4, 5])
            expect { chain_enumerator([0, 1, 2, 3, 4, 5]).each_with_index { |status, index| index.abs } }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")

            expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
            expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).each_with_index { |(key, value), index| value.to_s.ord }.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5})
            expect(service.service_aware_enumerable((0..5)).each_with_index { |number, index| index.abs }.result).to be_success.with_data(values: (0..5))
          end

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_with_index { |(key, value), index| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_with_index { |(key, value), index| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_each_with_index { |(key, value), index| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_each_with_index { |(key, value), index| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_each_with_index { |status, index| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.each_with_index { |(key, value), index| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.each_with_index { |(key, value), index| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_index { |status, index| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each_with_index { |(key, value), index| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each_with_index { |status, index| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_each_with_object" do
        specify do
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Empty collection.
            expect([].each_with_object("") { |string, object| concat_strings(object, string) }).to eq("")
            expect(chain_enumerator([]).each_with_object("") { |string, object| concat_strings(object, string) }).to eq("")

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable([]).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable({}).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          elsif ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: Empty collection.
            expect([].each_with_object("") { |string, object| concat_strings(object, string) }).to eq("")
            expect { chain_enumerator([]).each_with_object("") { |string, object| concat_strings(object, string) } }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect { service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable([]).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable({}).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          else
            # NOTE: Empty collection.
            expect([].each_with_object("") { |string, object| concat_strings(object, string) }).to eq("")

            expect(service.service_aware_enumerable(enumerable([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect { chain_enumerator([]).each_with_object("") { |string, object| concat_strings(object, string) }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect { service.service_aware_enumerator(chain_enumerator([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable([]).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable(set([])).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable({}).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
            expect(service.service_aware_enumerable((:success...:success)).service_aware_each_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          end

          if ConvenientService::Dependencies.ruby.version >= 3.1
            # NOTE: No block.
            expect(["0", "1", "2", "3", "4", "5"].each_with_object("").to_a).to eq([["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(chain_enumerator(["0", "1", "2", "3", "4", "5"]).each_with_object("").to_a).to eq([["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])

            expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each_with_object("").result).to be_success.with_data(values: [[["0", "0"], ""], [["1", "1"], ""], [["2", "2"], ""], [["3", "3"], ""], [["4", "4"], ""], [["5", "5"], ""]])
            expect(service.service_aware_enumerable(("0".."5")).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          else
            # NOTE: No block.
            expect(["0", "1", "2", "3", "4", "5"].each_with_object("").to_a).to eq([["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect { chain_enumerator(["0", "1", "2", "3", "4", "5"]).each_with_object("").to_a }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")

            expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect { service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
            expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each_with_object("").result).to be_success.with_data(values: [[["0", "0"], ""], [["1", "1"], ""], [["2", "2"], ""], [["3", "3"], ""], [["4", "4"], ""], [["5", "5"], ""]])
            expect(service.service_aware_enumerable(("0".."5")).service_aware_each_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          end

          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Block.
            expect(["0", "1", "2", "3", "4", "5"].each_with_object(+"") { |string, object| concat_strings(object, string) }).to eq("12345")

            expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(chain_enumerator(["0", "1", "2", "3", "4", "5"]).each_with_object(+"") { |string, object| concat_strings(object, string) }).to eq("12345")
            expect(service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}.each_with_object(+"") { |(key, value), object| concat_strings(object, value) }).to eq("12345")
            expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).each_with_object(+"") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerable(("0".."5")).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          else
            # NOTE: Block.
            expect(["0", "1", "2", "3", "4", "5"].each_with_object(+"") { |string, object| concat_strings(object, string) }).to eq("12345")

            expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect { chain_enumerator(["0", "1", "2", "3", "4", "5"]).each_with_object(+"") { |string, object| concat_strings(object, string) } }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect { service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(TypeError).with_message("wrong argument type chain (expected enumerator)")
            expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
            expect({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}.each_with_object(+"") { |(key, value), object| concat_strings(object, value) }).to eq("12345")
            expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).each_with_object(+"") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "12345")
            expect(service.service_aware_enumerable(("0".."5")).each_with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          end

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable(["0", "-1", :exception])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator(["0", "-1", :exception])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "-1", :exception])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(["0", "-1", :exception]).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set(["0", "-1", :exception])).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({"0" => "0", "-1" => "-1", :exception => :exception}).service_aware_each_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(("-1".."-1")).service_aware_each_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.each_with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#entries" do
        specify do
          # NOTE: Empty collection.
          expect([].entries).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).entries.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).entries.result).to be_success.with_data(values: [])

          # NOTE: Not empty collection.
          expect([:success, :success, :success].entries).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).entries.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).entries.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).entries.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).entries.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).entries.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).entries.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).entries.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).entries.result).to be_success.with_data(values: [:success])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.entries.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.entries.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.entries.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_entries.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#step_aware_filter" do
        specify do
          # NOTE: Empty collection.
          expect([].filter { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          ##
          # HACK: JRuby raises `"tried to call lazy filter without a block"` instead of `"tried to call lazy select without a block"`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block.
            expect([:success, :failure, :success, :failure].filter.to_a).to eq([:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter.result }.to raise_error(ArgumentError).with_message("tried to call lazy filter without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_filter.result).to be_success.with_data(values: [:success])
          else
            # NOTE: No block.
            expect([:success, :failure, :success, :failure].filter.to_a).to eq([:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter.result).to be_success.with_data(values: [:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter.result).to be_success.with_data(values: [:success, :failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_filter.result).to be_success.with_data(values: [:success])
          end

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].filter { |status| status_condition[status] }).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])

          expect(service.service_aware_enumerable(set([:success, :failure])).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).filter { |key, value| status_condition[value] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).filter { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.filter { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.filter { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_filter { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_filter { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_filter_map" do
        specify do
          # NOTE: Empty collection.
          expect([].filter_map { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].filter_map.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_filter_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_filter_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_filter_map.result }.to raise_error(ArgumentError).with_message("tried to call lazy filter_map without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_filter_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_filter_map.result).to be_success.with_data(values: [:success, :success, :success])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter_map.result).to be_success.with_data(values: [:success, :failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter_map.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter_map.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].filter_map { |status| status_condition[status] }).to eq([true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])

          expect(service.service_aware_enumerable(set([:success, :failure])).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).filter_map { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:failure..:failure)).filter_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter_map { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_filter_map { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.filter_map { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.filter_map { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.filter_map { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_filter_map { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_filter_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_find" do
        specify do
          # NOTE: Empty collection.
          expect([].find { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_find { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: No block.
          expect([:success].find.to_a).to eq([:success])

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success]).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_find.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_find.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find.result).to be_success.with_data(values: [:success])

          # NOTE: Matched block.
          expect([:failure, :success, :exception].find { |status| status_condition[status] }).to eq(:success)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable({success: :success}).find { |key, value| status_condition[value] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).find { |status| status_condition[status] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched block.
          expect([:failure, :failure, :failure].find { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).find { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).find { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).find { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Not matched block with ifnode.
          expect([:failure, :failure, :failure].find(-> { :default }) { |status| status_condition[status] }).to eq(:default)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable({failure: :failure}).find(-> { :default }) { |key, value| status_condition[value] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).find(-> { :default }) { |status| status_condition[status] }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Not matched step with no outputs with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find(-> { :default }) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Not matched step with one output with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find(-> { :default }) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: :default)

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :success)

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Not matched step with multiple outputs with ifnode.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find(-> { :default }) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find(-> { :default }) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: :default)

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_find { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_find { |key, value| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_find { |key, value| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_find { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_find_all" do
        specify do
          # NOTE: Empty collection.
          expect([].find_all { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          ##
          # HACK: JRuby raises `"tried to call lazy service_aware_find_all without a block"` instead of `"tried to call lazy select without a block"`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block.
            expect([:success, :failure, :success, :failure].find_all.to_a).to eq([:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result }.to raise_error(ArgumentError).with_message("tried to call lazy find_all without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_find_all.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_find_all.result).to be_success.with_data(values: [:success])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_all.result).to be_success.with_data(values: [:failure])
          else
            # NOTE: No block.
            expect([:success, :failure, :success, :failure].find_all.to_a).to eq([:success, :failure, :success, :failure])

            expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
            expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
            expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_find_all.result).to be_success.with_data(values: [:success, :failure])
            expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_find_all.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
            expect(service.service_aware_enumerable((:success..:success)).service_aware_find_all.result).to be_success.with_data(values: [:success])
            expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_all.result).to be_success.with_data(values: [:failure])
          end

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].find_all { |status| status_condition[status] }).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).find_all { |key, value| status_condition[value] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).find_all { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_find_all { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_find_all { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_find_all { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_all { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_find_all { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_find_all { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.find_all { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.find_all { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.find_all { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_find_all { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_find_all { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_find_index" do
        specify do
          # NOTE: Empty collection.
          expect([].find_index { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_find_index { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Matched value.
          expect([:failure, :success, :exception].find_index(:success)).to eq(1)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find_index(:success).result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find_index([:success, :success]).result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_index(:success).result).to be_success.with_data(value: 0)

          # NOTE: Not matched value.
          expect([:failure, :failure, :failure].find_index(:success)).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find_index(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_index(:success).result).to be_failure.without_data

          # NOTE: No block.
          expect([:success].find_index.to_a).to eq([:success])

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success]).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_find_index.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_find_index.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_index.result).to be_success.with_data(values: [:success])

          # NOTE: Matched block.
          expect([:failure, :success, :exception].find_index { |status| status_condition[status] }).to eq(1)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).find_index { |key, value| status_condition[value] }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success..:success)).find_index { |status| status_condition[status] }.result).to be_success.with_data(value: 0)

          # NOTE: Not matched block.
          expect([:failure, :failure, :failure].find_index { |status| status_condition[status] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).find_index { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).find_index { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).find_index { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(value: 0)

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(value: 0)

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({success: :success}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success..:success)).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(value: 0)

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_find_index { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_find_index { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_find_index { |key, value| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_find_index { |key, value| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_find_index { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_find_index { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#first" do
        specify do
          # NOTE: Empty collection.
          expect([].first).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).first.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).first.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).first.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).first.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).first.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).first.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).first.result).to be_failure.without_data
          expect((:success...:success).first).to eq(:success)
          expect(service.service_aware_enumerable((:success...:success)).first.result).to be_success.with_data(value: :success)
          expect((0...0).step(-1).first).to eq(0)
          expect(service.service_aware_enumerator((0...0).step(-1)).first.result).to be_success.with_data(value: 0)

          # NOTE: No n.
          expect([:success, :success, :failure].first).to eq(:success)

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :failure])).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :failure])).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :failure])).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :failure])).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable([:success, :failure, :failure]).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable(set([:success, :failure, :failure])).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerable({success: :success}).first.result).to be_success.with_data(value: [:success, :success])
          expect(service.service_aware_enumerable((:success..:success)).first.result).to be_success.with_data(value: :success)
          expect(service.service_aware_enumerator((5..0).step(-1)).first.result).to be_success.with_data(value: 5)

          # NOTE: N.
          expect([:success, :success, :failure].first(2)).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure])).first(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure])).first(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure])).first(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure])).first(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure]).first(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success])).first(1).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).first(1) { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).first(1).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator((5..0).step(-1)).first(1).result).to be_success.with_data(values: [5])

          # NOTE: Too big N.
          expect([:success, :success].first(4)).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success])).first(4).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success])).first(4).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success])).first(4).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success])).first(4).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success]).first(4).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success])).first(4).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).first(4) { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).first(4).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator((2..0).step(-1)).first(4).result).to be_success.with_data(values: [2, 1, 0])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:error, :exception]).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:error, :exception])).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({error: :error, exception: :exception}).service_aware_find { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_find { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.first.result).to be_failure.without_data
          # expect(service.service_aware_enumerator((0..0).step(1)).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.first.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator((5..0).step(-1)).service_aware_any?.first.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_flat_map" do
        specify do
          # NOTE: Empty collection.
          expect([].flat_map { |number| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].flat_map.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_flat_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_flat_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_flat_map.result }.to raise_error(ArgumentError).with_message("tried to call lazy flat_map without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_flat_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_flat_map.result).to be_success.with_data(values: [:success, :success, :success])

          expect(service.service_aware_enumerable(set([:success])).service_aware_flat_map.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_flat_map.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_flat_map.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :success, :success].flat_map { |status| status_condition[status] }).to eq([true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])

          expect(service.service_aware_enumerable(set([:success])).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).flat_map { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).flat_map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])

          # NOTE: Flatten.
          expect([:success, :success, :success].flat_map { |status| [status_condition[status], status_condition[status]] }).to eq([true, true, true, true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true, true, true, true, true])

          expect(service.service_aware_enumerable(set([:success])).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable({success: :success}).flat_map { |key, value| [status_condition[value], status_condition[value]] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable((:success..:success)).flat_map { |status| [status_condition[status], status_condition[status]] }.result).to be_success.with_data(values: [true, true])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])

          expect(service.service_aware_enumerable(set([:success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).service_aware_flat_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])

          expect(service.service_aware_enumerable(set([:success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({success: :success}).service_aware_flat_map { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])

          expect(service.service_aware_enumerable(set([:success])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({success: :success}).service_aware_flat_map { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_flat_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_flat_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_flat_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.flat_map { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.flat_map { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.flat_map { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_flat_map { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_flat_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_grep" do
        specify do
          # NOTE: Empty collection.
          expect([].grep(/success/) { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_grep(/success/) { |key, value| status_condition[value] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Only pattern.
          expect([:failure, :success, :failure, :success].grep(/success/)).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep(/success/).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep(/success/).result).to be_success.with_data(values: [:success, :success])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep(/success/).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep([:success, :success]).result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep(/success/).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep(/success/).result).to be_success.with_data(values: [])

          # NOTE: Block.
          expect([:failure, :success, :failure, :success].grep(/success/) { |status| status_condition[status] }).to eq([true, true])

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true])

          expect(service.service_aware_enumerable(set([:failure, :success])).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).grep([:success, :success]) { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:failure..:failure)).grep(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep([:success, :success]) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok"])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep([:success, :success]) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep([:success, :success]) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_grep([:error, :error]) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_grep(/error/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.grep([:success, :success]) { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.grep([:success, :success]) { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.grep(/success/) { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_grep([:success, :success]) { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_grep(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_grep_v" do
        specify do
          # NOTE: Empty collection.
          expect([].grep_v(/success/) { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_grep_v(/success/) { |key, value| status_condition[value] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Only pattern.
          expect([:failure, :success, :failure, :success].grep_v(/success/)).to eq([:failure, :failure])

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure, :failure])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep_v([:success, :success]).result).to be_success.with_data(values: [[:failure, :failure]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep_v(/success/).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep_v(/success/).result).to be_success.with_data(values: [:failure])

          # NOTE: Block.
          expect([:failure, :success, :failure, :success].grep_v(/success/) { |status| status_condition[status] }).to eq([false, false])

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false, false])

          expect(service.service_aware_enumerable(set([:failure, :success])).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).grep_v([:success, :success]) { |key, value| status_condition[value] }.result).to be_success.with_data(values: [false])
          expect(service.service_aware_enumerable((:success..:success)).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).grep_v(/success/) { |status| status_condition[status] }.result).to be_success.with_data(values: [false])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false, false])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false, false])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep_v([:success, :success]) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [false])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [false])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil, nil])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep_v([:success, :success]) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [nil])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [nil])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable([:failure, :success, :failure, :success]).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil, nil])

          expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil])
          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_grep_v([:success, :success]) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_grep_v(/success/) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [nil])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_grep_v([:failure, :failure]) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_grep_v(/failure/) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_grep_v([:success, :success]) { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_grep_v([:success, :success]) { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_grep_v(/success/) { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_grep_v([:success, :success]) { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_grep_v(/success/) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_group_by" do
        specify do
          # NOTE: Empty collection.
          expect([].group_by { |status| status_condition[status] }).to eq({})

          expect(service.service_aware_enumerable(enumerable([])).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(enumerator([])).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable([]).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable(set([])).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable({}).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {})

          # NOTE: No block.
          expect([:success, :success, :success].group_by.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_group_by.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_group_by.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_group_by.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_group_by.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_group_by.result).to be_success.with_data(values: [:success, :success, :success])

          expect(service.service_aware_enumerable(set([:success])).service_aware_group_by.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_group_by.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_group_by.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].group_by { |status| status_condition[status] }).to eq({true => [:success, :success], false => [:failure, :failure]})

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})

          expect(service.service_aware_enumerable(set([:success, :failure])).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success], false => [:failure]})
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).group_by { |key, value| status_condition[value] }.result).to be_success.with_data(values: {true => [[:success, :success]], false => [[:failure, :failure]]})
          expect(service.service_aware_enumerable((:success..:success)).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {true => [:success]})
          expect(service.service_aware_enumerable((:failure..:failure)).group_by { |status| status_condition[status] }.result).to be_success.with_data(values: {false => [:failure]})

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success, :success], false => [:failure, :failure]})

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success], false => [:failure]})
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_group_by { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {true => [[:success, :success]], false => [[:failure, :failure]]})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {true => [:success]})
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: {false => [:failure]})

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success, :success], nil => [:failure, :failure]})

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success], nil => [:failure]})
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_group_by { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [[:success, :success]], nil => [[:failure, :failure]]})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {"ok" => [:success]})
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: {nil => [:failure]})

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success, :success], nil => [:failure, :failure]})
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success, :success], nil => [:failure, :failure]})

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success], nil => [:failure]})
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_group_by { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [[:success, :success]], nil => [[:failure, :failure]]})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {{status_string: "ok", status_code: 200} => [:success]})
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_group_by { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {nil => [:failure]})

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_group_by { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_group_by { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.group_by { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.group_by { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.group_by { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_group_by { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_group_by { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#include?" do
        specify do
          # NOTE: Empty collection.
          expect([].include?(:success)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).include?(:success).result).to be_failure.without_data

          # NOTE: Matched pattern.
          expect([:failure, :success, :exception].include?(:success)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).include?(:success).result).to be_success.without_data

          expect(service.service_aware_enumerable({success: :success}).include?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).include?(:success).result).to be_success.without_data

          # NOTE: Not matched pattern.
          expect([:failure, :failure, :failure].include?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).include?(:success).result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).include?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).include?(:success).result).to be_failure.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_error.without_data

          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.include?(:success).result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.include?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.include?(:success).result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_include?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_inject" do
        specify do
          # NOTE: Empty collection.
          expect([].inject(0) { |memo, number| memo + number }).to eq(0)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(enumerator([])).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable([]).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable(set([])).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable({}).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success...:success)).service_aware_inject(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)

          if ConvenientService::Dependencies.ruby.version >= 3.2 || ConvenientService::Dependencies.ruby.match?("jruby < 9.5")
            # NOTE: No initial, no sym, no block.
            expect { [0, 1, 2, 3, 4, 5].inject }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")

            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable((0..5)).service_aware_inject.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
          else
            # NOTE: No initial, no sym, no block.
            expect { [0, 1, 2, 3, 4, 5].inject }.to raise_error(LocalJumpError).with_message("no block given")

            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable((0..5)).service_aware_inject.result }.to raise_error(LocalJumpError).with_message("no block given")
          end

          # NOTE: Sym.
          expect([0, 1, 2, 3, 4, 5].inject(:+)).to eq(15)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.inject(:+)).to eq([0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject(:+).result).to be_success.with_data(value: [0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).service_aware_inject(:+).result).to be_success.with_data(value: 15)

          # NOTE: Initial, sym.
          expect([0, 1, 2, 3, 4, 5].inject(10, :+)).to eq(25)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.inject([10, 10], :+)).to eq([10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject([10, 10], :+).result).to be_success.with_data(value: [10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).service_aware_inject(10, :+).result).to be_success.with_data(value: 25)

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].inject { |memo, number| memo + number }).to eq(15)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.inject { |memo, number| memo + number }).to eq([0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).inject { |memo, number| memo + number }.result).to be_success.with_data(value: [0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).inject { |memo, number| memo + number }.result).to be_success.with_data(value: 15)

          # NOTE: Initial, block.
          expect([0, 1, 2, 3, 4, 5].inject(10) { |memo, number| memo + number }).to eq(25)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.inject([10, 10]) { |memo, number| memo + number }).to eq([10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).inject([10, 10]) { |memo, number| memo + number }.result).to be_success.with_data(value: [10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).inject(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable((0..5)).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([0, 1, 2])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable([0, 1, 2]).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_inject(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable((0..2)).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_inject({sum: 0}) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { value }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable((0..5)).service_aware_inject({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})

          # NOTE: Error result.
          expect((-1..-1).inject { |memo, number| raise }).to eq(-1)

          expect(service.service_aware_enumerable(enumerable([0, -1, :exception])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([0, -1, :exception])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([0, -1, :exception])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([0, -1, :exception])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable([0, -1, :exception]).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([0, -1, :exception])).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable({0 => 0, -1 => -1, :exception => :exception}).service_aware_inject(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_inject { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: -1)

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_inject(0) { |memo, (key, value)| memo + value }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_inject(0) { |memo, (key, value)| memo + value }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_inject { |memo, number| memo + number }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_inject { |memo, (key, value)| memo + value }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_inject { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#lazy" do
        specify do
          # NOTE: Empty collection.
          expect([].lazy.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).lazy.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).lazy.result).to be_success.with_data(values: [])

          # NOTE: Not empty collection.
          expect([:success, :success, :success].lazy.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).lazy.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).lazy.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).lazy.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).lazy.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).lazy.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).lazy.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).lazy.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).lazy.result).to be_success.with_data(values: [:success])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.lazy.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.lazy.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.lazy.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_lazy.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_map" do
        specify do
          # NOTE: Empty collection.
          expect([].map { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_map { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :success, :success].map.to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_map.result }.to raise_error(ArgumentError).with_message("tried to call lazy map without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_map.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_map.result).to be_success.with_data(values: [:success, :success, :success])

          expect(service.service_aware_enumerable(set([:success])).service_aware_map.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_map.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_map.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :success, :success].map { |status| status_condition[status] }).to eq([true, true, true])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true, true, true])

          expect(service.service_aware_enumerable(set([:success])).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).map { |key, value| status_condition[value] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).map { |status| status_condition[status] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true, true, true])

          expect(service.service_aware_enumerable(set([:success])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable({success: :success}).service_aware_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [true])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [true])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok", "ok", "ok"])

          expect(service.service_aware_enumerable(set([:success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable({success: :success}).service_aware_map { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: ["ok"])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_map { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: ["ok"])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}, {status_string: "ok", status_code: 200}])

          expect(service.service_aware_enumerable(set([:success])).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable({success: :success}).service_aware_map { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_map { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [{status_string: "ok", status_code: 200}])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_map { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_map { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.map { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.map { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.map { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_map { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_map { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_max" do
        specify do
          # NOTE: Empty collection.
          expect([].max).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_max.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_max.result).to be_failure.without_data

          # NOTE: No block, no n.
          expect([1, 2, 3, 4, 5].max).to eq(5)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max.result).to be_success.with_data(value: [5, 5])
          expect(service.service_aware_enumerable((1..5)).service_aware_max.result).to be_success.with_data(value: 5)

          # NOTE: Block, no n.
          expect([1, 2, 3, 4, 5].max { |number, other_number| number <=> other_number }).to eq(5)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: [5, 5])
          expect(service.service_aware_enumerable((1..5)).max { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 5)

          # NOTE: Block, n.
          # - https://gist.github.com/marian13/a40f3be1379376d8991a98b9f1b37dcc
          expect([1, 2, 3, 4, 5].max(2) { |number, other_number| number <=> other_number }).to eq([5, 4])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [[5, 5], [4, 4]])
          expect(service.service_aware_enumerable((1..5)).max(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [5, 4])

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable((1..5)).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :integer }.result).to be_success.with_data(value: [5, 5])
          expect(service.service_aware_enumerable((1..5)).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 5)

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable((1..5)).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          ##
          # HACK: JRuby returns `nil` for `(-1..-1)`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_max { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).max { raise }).to eq(nil)
            expect(service.service_aware_enumerable((-1..-1)).service_aware_max { raise }.result).to be_success.with_data(value: -1)
          else
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_max { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_max { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).max { raise }).to eq(-1)
            expect(service.service_aware_enumerable((-1..-1)).service_aware_max { raise }.result).to be_success.with_data(value: -1)
          end

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_max.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_max.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_max.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_max.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_max_by" do
        specify do
          # NOTE: Empty collection.
          expect([].max_by { |number| number.to_s.ord }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).max_by { |number| number.to_s.ord }.result).to be_failure.without_data

          ##
          # HACK: Looks like JRuby has a default block.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block, no n.
            expect { [1, 2, 3, 4, 5].max_by.to_a }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")

            expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Array with Array failed")
            expect { service.service_aware_enumerable((1..5)).service_aware_max_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
          else
            # NOTE: No block, no n.
            expect([1, 2, 3, 4, 5].max_by.to_a).to eq([1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable((1..5)).service_aware_max_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          end

          ##
          # TODO: Why JRuby raises exception only for wrapped `max_by`?
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block, n.
            expect([1, 2, 3, 4, 5].max_by(2).to_a).to eq([1, 2, 3, 4, 5])

            expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Array with Array failed")
            expect { service.service_aware_enumerable((1..5)).service_aware_max_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
          else
            # NOTE: No block, n.
            expect([1, 2, 3, 4, 5].max_by(2).to_a).to eq([1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by(2).result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable((1..5)).service_aware_max_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          end

          # NOTE: Block, no n.
          expect([1, 2, 3, 4, 5].max_by { |number| number.to_s.ord }).to eq(5)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).max_by { |key, value| value.to_s.ord }.result).to be_success.with_data(value: [5, 5])
          expect(service.service_aware_enumerable((1..5)).max_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 5)

          # NOTE: Block, n.
          expect([1, 2, 3, 4, 5].max_by(2) { |number| number.to_s.ord }).to eq([5, 4])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).max_by(2) { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[5, 5], [4, 4]])
          expect(service.service_aware_enumerable((1..5)).max_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [5, 4])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by { |(key, value)| step number_service, in: [number: -> { value }] }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).service_aware_max_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(value: [5, 5])
          expect(service.service_aware_enumerable((1..5)).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 5)

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_max_by { |(key, value)| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable((1..5)).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_max_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_max_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.max_by { |number| number.to_s.ord }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.max_by { |number| number.to_s.ord }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_max_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#member?" do
        specify do
          # NOTE: Empty collection.
          expect([].member?(:success)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).member?(:success).result).to be_failure.without_data

          # NOTE: Matched pattern.
          expect([:failure, :success, :exception].member?(:success)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).member?(:success).result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).member?(:success).result).to be_success.without_data

          # NOTE: Not matched pattern.
          expect([:failure, :failure, :failure].member?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure}).member?(:success).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).member?(:success).result).to be_failure.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.member?(:success).result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.member?(:success).result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.member?(:success).result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_member?(:success).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_min" do
        specify do
          # NOTE: Empty collection.
          expect([].min).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_min.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_min.result).to be_failure.without_data

          # NOTE: No block, no n.
          expect([1, 2, 3, 4, 5].min).to eq(1)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).service_aware_min.result).to be_success.with_data(value: 1)

          # NOTE: Block, no n.
          expect([1, 2, 3, 4, 5].min { |number, other_number| number <=> other_number }).to eq(1)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).min { |number, other_number| number <=> other_number }.result).to be_success.with_data(value: 1)

          # NOTE: Block, n.
          # - https://gist.github.com/marian13/a40f3be1379376d8991a98b9f1b37dcc
          expect([1, 2, 3, 4, 5].min(2) { |number, other_number| number <=> other_number }).to eq([1, 2])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [[1, 1], [2, 2]])
          expect(service.service_aware_enumerable((1..5)).min(2) { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2])

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable((1..5)).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :integer }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(value: 1)

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable((1..5)).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          ##
          # HACK: JRuby returns `nil` for `(-1..-1)`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_min { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).min { raise }).to eq(nil)
            expect(service.service_aware_enumerable((-1..-1)).service_aware_min { raise }.result).to be_success.with_data(value: -1)
          else
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_min { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_min { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).min { raise }).to eq(-1)
            expect(service.service_aware_enumerable((-1..-1)).service_aware_min { raise }.result).to be_success.with_data(value: -1)
          end

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_min.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_min.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_min.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_min.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_min_by" do
        specify do
          # NOTE: Empty collection.
          expect([].min_by { |number| number.to_s.ord }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([])).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).min_by { |number| number.to_s.ord }.result).to be_failure.without_data

          ##
          # HACK: Looks like JRuby has a default block.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block, no n.
            expect { [1, 2, 3, 4, 5].min_by.to_a }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")

            expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Array with Array failed")
            expect { service.service_aware_enumerable((1..5)).service_aware_min_by.result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
          else
            # NOTE: No block, no n.
            expect([1, 2, 3, 4, 5].min_by.to_a).to eq([1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable((1..5)).service_aware_min_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          end

          ##
          # HACK: Why JRuby raises exception only for wrapped `min_by`?
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block, n.
            expect([1, 2, 3, 4, 5].min_by(2).to_a).to eq([1, 2, 3, 4, 5])

            expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
            expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Array with Array failed")
            expect { service.service_aware_enumerable((1..5)).service_aware_min_by(2).result }.to raise_error(ArgumentError).with_message("comparison of Integer with 1 failed")
          else
            # NOTE: No block, n.
            expect([1, 2, 3, 4, 5].min_by(2).to_a).to eq([1, 2, 3, 4, 5])

            expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by(2).result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
            expect(service.service_aware_enumerable((1..5)).service_aware_min_by(2).result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          end

          # NOTE: Block, no n.
          expect([1, 2, 3, 4, 5].min_by { |number| number.to_s.ord }).to eq(1)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).min_by { |key, value| value.to_s.ord }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).min_by { |number| number.to_s.ord }.result).to be_success.with_data(value: 1)

          # NOTE: Block, n.
          expect([1, 2, 3, 4, 5].min_by(2) { |number| number.to_s.ord }).to eq([1, 2])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).min_by(2) { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[1, 1], [2, 2]])
          expect(service.service_aware_enumerable((1..5)).min_by(2) { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by { |(key, value)| step number_service, in: [number: -> { value }] }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).service_aware_min_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(value: 1)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(value: [1, 1])
          expect(service.service_aware_enumerable((1..5)).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 1)

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_min_by { |(key, value)| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable((1..5)).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_min_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_min_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.min_by { |number| number.to_s.ord }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.min_by { |number| number.to_s.ord }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_min_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_minmax" do
        specify do
          # NOTE: Empty collection.
          expect([].minmax).to eq([nil, nil])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable([]).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable({}).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable(set([])).service_aware_minmax.result).to be_success.with_data(values: [nil, nil])

          # NOTE: No block.
          expect([1, 2, 3, 4, 5].minmax).to eq([1, 5])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax.result).to be_success.with_data(values: [[1, 1], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_minmax.result).to be_success.with_data(values: [1, 5])

          # NOTE: Block.
          expect([1, 2, 3, 4, 5].minmax { |number, other_number| number <=> other_number }).to eq([1, 5])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [[1, 1], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).minmax { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 5])

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable((1..5)).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :integer }.result).to be_success.with_data(values: [[1, 1], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 5])

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable((1..5)).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          ##
          # HACK: JRuby returns `[nil, nil]` for range `(-1..-1)`.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_minmax { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).minmax { raise }).to eq([nil, nil])
            expect(service.service_aware_enumerable((-1..-1)).service_aware_minmax { raise }.result).to be_success.with_data(values: [-1, -1])
          else
            # NOTE: Error result.
            expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_minmax { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :number_code }.result).to be_error.without_data
            expect(service.service_aware_enumerable((-2..-1)).service_aware_minmax { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :number_code }.result).to be_error.without_data

            expect((-1..-1).minmax { raise }).to eq([-1, -1])
            expect(service.service_aware_enumerable((-1..-1)).service_aware_minmax { raise }.result).to be_success.with_data(values: [-1, -1])
          end

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_minmax.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_minmax.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_minmax.result).to be_failure.without_data

          # NOTE: Usage on terminmaxal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_minmax.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_minmax_by" do
        specify do
          # NOTE: Empty collection.
          expect([].minmax_by { |number| number.to_s.ord }).to eq([nil, nil])

          expect(service.service_aware_enumerable(enumerable([])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(enumerator([])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(lazy_enumerator([])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerator(chain_enumerator([])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable([]).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable({}).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable((:success...:success)).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])
          expect(service.service_aware_enumerable(set([])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [nil, nil])

          # NOTE: No block.
          expect([1, 2, 3, 4, 5].minmax_by.to_a).to eq([1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax_by.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_minmax_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Block.
          expect([1, 2, 3, 4, 5].minmax_by { |number| number.to_s.ord }).to eq([1, 5])

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).minmax_by { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[1, 1], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).minmax_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 5])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax_by { |(key, value)| step number_service, in: [number: -> { value }] }.result).to be_success.with_data(values: [[1, 1], [1, 1]])
          expect(service.service_aware_enumerable((1..5)).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 1])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])

          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(values: [[1, 1], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 5])

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_minmax_by { |(key, value)| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable((1..5)).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_minmax_by { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_minmax_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.minmax_by { |number| number.to_s.ord }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.minmax_by { |number| number.to_s.ord }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_minmax_by { |number| number.to_s.ord }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_none?" do
        specify do
          # NOTE: Empty collection.
          expect([].none?).to eq(true)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerable([]).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerable({}).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_none?.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_none?.result).to be_success.without_data

          # NOTE: No block, no pattern.
          expect([:success].none?).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success]).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:success])).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_none?.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_none?.result).to be_failure.without_data

          # NOTE: Matched pattern.
          expect([:failure, :success, :exception].none?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_none?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_none?([:success, :success]).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_none?(/success/).result).to be_failure.without_data

          # NOTE: Not matched pattern.
          expect([:failure, :failure, :failure].none?(/success/)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_none?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_none?([:success, :success]).result).to be_success.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_none?(/success/).result).to be_success.without_data

          # NOTE: Matched block.
          expect([:failure, :success, :exception].none? { |status| status_condition[status] }).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).none? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).none? { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).none? { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Not matched block.
          expect([:failure, :failure, :failure].none? { |status| status_condition[status] }).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).none? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure}).none? { |key, value| status_condition[value] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).none? { |status| status_condition[status] }.result).to be_success.without_data

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:failure, :success, :exception]).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable({failure: :failure, success: :success, exception: :exception}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :failure, :failure])).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable({failure: :failure}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_none? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_none? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_none? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_error.without_data
          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_none?.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_none?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_none?.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_none?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_one?" do
        specify do
          # NOTE: Empty collection.
          expect([].one?).to eq(false)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([])).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerable([]).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerable({}).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:success...:success)).service_aware_one?.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([])).service_aware_one?.result).to be_failure.without_data

          # NOTE: No block, no pattern.
          expect([:success].one?).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:success])).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:success])).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerable([:success]).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:success])).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerable({success: :success}).service_aware_one?.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_one?.result).to be_success.without_data

          # NOTE: Matched pattern.
          expect([:failure, :success, :failure].one?(/success/)).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_one?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_one?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_one?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_one?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_one?(/success/).result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :failure])).service_aware_one?(/success/).result).to be_success.without_data

          expect(service.service_aware_enumerable({success: :success}).service_aware_one?([:success, :success]).result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_one?(/success/).result).to be_success.without_data

          # NOTE: Not matched pattern.
          expect([:success, :success, :exception].one?(/success/)).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:success, :success, :exception])).service_aware_one?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :exception])).service_aware_one?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :exception])).service_aware_one?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :exception])).service_aware_one?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :success, :exception]).service_aware_one?(/success/).result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_one?(/success/).result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_one?([:success, :success]).result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_one?(/success/).result).to be_failure.without_data

          # NOTE: Matched block.
          expect([:failure, :success, :failure].one? { |status| status_condition[status] }).to eq(true)

          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).one? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).one? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).one? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).one? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :failure]).one? { |status| status_condition[status] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :failure])).one? { |status| status_condition[status] }.result).to be_success.without_data

          expect(service.service_aware_enumerable({failure: :failure, success: :success}).one? { |key, value| status_condition[value] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).one? { |status| status_condition[status] }.result).to be_success.without_data

          # NOTE: Not matched block.
          expect([:success, :success, :exception].one? { |status| status_condition[status] }).to eq(false)

          expect(service.service_aware_enumerable(enumerable([:success, :success, :exception])).one? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :exception])).one? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :exception])).one? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :exception])).one? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :success, :exception]).one? { |status| status_condition[status] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).one? { |status| status_condition[status] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).one? { |key, value| status_condition[value] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).one? { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data

          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_success.without_data

          # NOTE: Not matched step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :success, :exception]).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_failure.without_data

          # NOTE: Matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data

          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.without_data

          # NOTE: Not matched step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :success, :exception]).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_failure.without_data

          # NOTE: Matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable(set([:failure, :success, :failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data

          expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.without_data
          expect(service.service_aware_enumerable((:success..:success)).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.without_data

          # NOTE: Not matched step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable([:success, :success, :exception]).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable(set([:failure])).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          expect(service.service_aware_enumerable({failure: :failure}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_failure.without_data
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_one? { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_failure.without_data

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_one? { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_one? { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data
          expect(service.service_aware_enumerable([:failure, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:failure, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_error.without_data

          expect(service.service_aware_enumerable({failure: :failure, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_one?.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_one?.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_one?.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_one?.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_partition" do
        specify do
          # NOTE: Empty collection.
          expect([].partition { |status| status_condition[status] }).to eq([[], []])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerable([]).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerable(set([])).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerable({}).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], []])

          # NOTE: No block.
          expect([:success, :failure, :success, :failure].partition.to_a).to eq([:success, :failure, :success, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_partition.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_partition.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_partition.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_partition.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_partition.result).to be_success.with_data(values: [:success, :failure, :success, :failure])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].partition { |status| status_condition[status] }).to eq([[:success, :success], [:failure, :failure]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])

          expect(service.service_aware_enumerable(set([:success, :failure])).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).partition { |key, value| status_condition[value] }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[:success], []])
          expect(service.service_aware_enumerable((:failure..:failure)).partition { |status| status_condition[status] }.result).to be_success.with_data(values: [[], [:failure]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_partition { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], []])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[], [:failure]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_partition { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], []])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[], [:failure]])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])

          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:failure]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_partition { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[[:success, :success]], [[:failure, :failure]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], []])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_partition { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[], [:failure]])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_partition { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_partition { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.partition { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.partition { |key, value| status_condition[value] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_partition { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_partition { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)

          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_partition { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_partition { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_reduce" do
        specify do
          # NOTE: Empty collection.
          expect([].reduce(0) { |memo, number| memo + number }).to eq(0)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(enumerator([])).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable([]).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable(set([])).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable({}).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success...:success)).service_aware_reduce(0) { |memo, number| memo + number }.result).to be_success.with_data(value: 0)

          if ConvenientService::Dependencies.ruby.version >= 3.2 || ConvenientService::Dependencies.ruby.match?("jruby < 9.5")
            # NOTE: No initial, no sym, no block.
            expect { [0, 1, 2, 3, 4, 5].reduce }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")

            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
            expect { service.service_aware_enumerable((0..5)).service_aware_reduce.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1..2)")
          else
            # NOTE: No initial, no sym, no block.
            expect { [0, 1, 2, 3, 4, 5].reduce }.to raise_error(LocalJumpError).with_message("no block given")

            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
            expect { service.service_aware_enumerable((0..5)).service_aware_reduce.result }.to raise_error(LocalJumpError).with_message("no block given")
          end

          # NOTE: Sym.
          expect([0, 1, 2, 3, 4, 5].reduce(:+)).to eq(15)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.reduce(:+)).to eq([0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce(:+).result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce(:+).result).to be_success.with_data(value: [0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).service_aware_reduce(:+).result).to be_success.with_data(value: 15)

          # NOTE: Initial, sym.
          expect([0, 1, 2, 3, 4, 5].reduce(10, :+)).to eq(25)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.reduce([10, 10], :+)).to eq([10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce([10, 10], :+).result).to be_success.with_data(value: [10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).service_aware_reduce(10, :+).result).to be_success.with_data(value: 25)

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].reduce { |memo, number| memo + number }).to eq(15)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.reduce { |memo, number| memo + number }).to eq([0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: [0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).reduce { |memo, number| memo + number }.result).to be_success.with_data(value: 15)

          # NOTE: Initial, block.
          expect([0, 1, 2, 3, 4, 5].reduce(10) { |memo, number| memo + number }).to eq(25)
          expect({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.reduce([10, 10]) { |memo, number| memo + number }).to eq([10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).reduce([10, 10]) { |memo, number| memo + number }.result).to be_success.with_data(value: [10, 10, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5])
          expect(service.service_aware_enumerable((0..5)).reduce(10) { |memo, number| memo + number }.result).to be_success.with_data(value: 25)

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)
          expect { service.service_aware_enumerable((0..5)).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]\+' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([0, 1, 2])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(enumerator([0, 1, 2])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable([0, 1, 2]).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_reduce(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }], out: :sum }.result).to be_success.with_data(value: 3)
          expect(service.service_aware_enumerable((0..2)).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: 3)

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reduce({sum: 0}) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { value }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})
          expect(service.service_aware_enumerable((0..5)).service_aware_reduce({sum: 0}) { |memo, number| step add_numbers_service, in: [number: -> { memo[:sum] }, other_number: -> { number }], out: [:sum, :operator] }.result).to be_success.with_data(value: {sum: 15, operator: "+"})

          # NOTE: Error result.
          expect((-1..-1).reduce { |memo, number| raise }).to eq(-1)

          expect(service.service_aware_enumerable(enumerable([0, -1, :exception])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([0, -1, :exception])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([0, -1, :exception])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([0, -1, :exception])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable([0, -1, :exception]).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([0, -1, :exception])).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable({0 => 0, -1 => -1, :exception => :exception}).service_aware_reduce(0) { |memo, (key, value)| step add_numbers_service, in: [number: -> { memo }, other_number: -> { value }], out: :sum }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_reduce { |memo, number| step add_numbers_service, in: [number: -> { memo }, other_number: -> { number }], out: :sum }.result).to be_success.with_data(value: -1)

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reduce(0) { |memo, (key, value)| memo + value }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reduce(0) { |memo, (key, value)| memo + value }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reduce { |memo, number| memo + number }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_reduce { |memo, (key, value)| memo + value }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_reduce { |memo, number| memo + number }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_reject" do
        specify do
          # NOTE: Empty collection.
          expect([].reject { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).reject { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :failure, :success, :failure].reject.to_a).to eq([:success, :failure, :success, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_reject.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_reject.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_reject.result }.to raise_error(ArgumentError).with_message("tried to call lazy reject without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_reject.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_reject.result).to be_success.with_data(values: [:success, :failure, :success, :failure])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].reject { |status| status_condition[status] }).to eq([:failure, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).reject { |key, value| status_condition[value] }.result).to be_success.with_data(values: {failure: :failure})
          expect(service.service_aware_enumerable((:success..:success)).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).reject { |status| status_condition[status] }.result).to be_success.with_data(values: [:failure])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_reject { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {failure: :failure})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:failure])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_reject { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {failure: :failure})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:failure])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_reject { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {failure: :failure})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_reject { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:failure])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_reject { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_reject { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reject { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reject { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.reject { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_reject { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_reject { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_reverse_each" do
        specify do
          # NOTE: Empty collection.
          expect([].reverse_each { |status| status_condition[status] }).to eq([])

          expect(set([]).reverse_each { |status| status_condition[status] }).to eq(set([]))
          expect({}.reverse_each { |status| status_condition[status] }).to eq({})
          expect((:success...:success).reverse_each { |status| status_condition[status] }).to eq((:success...:success))

          expect(service.service_aware_enumerable(enumerable([])).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: enumerable([]))
          expect(service.service_aware_enumerator(enumerator([])).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: set([]))
          expect(service.service_aware_enumerable({}).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_reverse_each { |status| status_condition[status] }.result).to be_success.with_data(values: (:success...:success))

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].reverse_each.to_a).to eq([5, 4, 3, 2, 1, 0])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(lazy_enumerator([0, 1, 2, 3, 4, 5]).reverse_each.to_a).to eq([5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_reverse_each.result).to be_success.with_data(values: [[5, 5], [4, 4], [3, 3], [2, 2], [1, 1], [0, 0]])
          expect(service.service_aware_enumerable((0..5)).service_aware_reverse_each.result).to be_success.with_data(values: [5, 4, 3, 2, 1, 0])

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].reverse_each { |number| number.to_s.ord }).to eq([0, 1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: enumerable([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: [0, 1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: set([0, 1, 2, 3, 4, 5]))
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).reverse_each { |key, value| value.to_s.ord }.result).to be_success.with_data(values: {5 => 5, 4 => 4, 3 => 3, 2 => 2, 1 => 1, 0 => 0})
          expect(service.service_aware_enumerable((0..5)).reverse_each { |number| number.to_s.ord }.result).to be_success.with_data(values: (0..5))

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_reverse_each { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_reverse_each { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: enumerable([:success, :success, :success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: set([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_reverse_each { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: (:success..:success))

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:exception, :error, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:exception, :error, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:exception, :error, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:exception, :error, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:exception, :error, :success]).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:exception, :error, :success])).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({exception: :exception, error: :error, success: :success}).service_aware_reverse_each { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_reverse_each { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reverse_each { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_reverse_each { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_reverse_each { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_reverse_each { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_reverse_each { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_select" do
        specify do
          # NOTE: Empty collection.
          expect([].select { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).select { |status| status_condition[status] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([:success, :failure, :success, :failure].select.to_a).to eq([:success, :failure, :success, :failure])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.result).to be_success.with_data(values: [:success, :failure])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.result).to be_success.with_data(values: [[:success, :success], [:failure, :failure]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.result).to be_success.with_data(values: [:success])

          # NOTE: Block.
          expect([:success, :failure, :success, :failure].select { |status| status_condition[status] }).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).select { |key, value| status_condition[value] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).select { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).select { |status| status_condition[status] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.select { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.select { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_select { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_select { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_slice_after" do
        specify do
          # NOTE: Empty collection.
          expect([].slice_after { |number| number % 3 == 0 }.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_slice_after { |key, value| value <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((0...0)).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])

          # NOTE: No block, no pattern.
          expect { [0, 1, 2, 3, 4, 5].slice_after.to_a }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable((0..5)).service_aware_slice_after.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")

          # NOTE: No block, pattern.
          expect([0, 1, 2, 3, 4, 5].slice_after({0 => true, 3 => true}.to_proc).to_a).to eq([[0], [1, 2, 3], [4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_after({[0, 0] => true, [3, 3] => true}.to_proc).result).to be_success.with_data(values: [[[0, 0]], [[1, 1], [2, 2], [3, 3]], [[4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).service_aware_slice_after({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])

          # NOTE: Block, no pattern.
          expect([0, 1, 2, 3, 4, 5].slice_after { |number| number % 3 == 0 }.to_a).to eq([[0], [1, 2, 3], [4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).slice_after { |(key, value)| value % 3 == 0 }.result).to be_success.with_data(values: [[[0, 0]], [[1, 1], [2, 2], [3, 3]], [[4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).slice_after { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_after { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_after { |(key, value)| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_after { |(key, value)| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_after { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_slice_after { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_slice_after { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.slice_after { |key, value| value == :success }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.slice_after { |key, value| value == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_after { |status| status == :success }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_slice_after { |key, value| value == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_slice_after { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_slice_before" do
        specify do
          # NOTE: Empty collection.
          expect([].slice_before { |number| number % 3 == 0 }.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_slice_before { |key, value| value <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((0...0)).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])

          # NOTE: No block, no pattern.
          expect { [0, 1, 2, 3, 4, 5].slice_before.to_a }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")
          expect { service.service_aware_enumerable((0..5)).service_aware_slice_before.result }.to raise_error(ArgumentError).with_message("wrong number of arguments (given 0, expected 1)")

          # NOTE: No block, pattern.
          expect([0, 1, 2, 3, 4, 5].slice_before({0 => true, 3 => true}.to_proc).to_a).to eq([[0, 1, 2], [3, 4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_before({[0, 0] => true, [3, 3] => true}.to_proc).result).to be_success.with_data(values: [[[0, 0], [1, 1], [2, 2]], [[3, 3], [4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).service_aware_slice_before({0 => true, 3 => true}.to_proc).result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])

          # NOTE: Block, no pattern.
          expect([0, 1, 2, 3, 4, 5].slice_before { |number| number % 3 == 0 }.to_a).to eq([[0, 1, 2], [3, 4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).slice_before { |(key, value)| value % 3 == 0 }.result).to be_success.with_data(values: [[[0, 0], [1, 1], [2, 2]], [[3, 3], [4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).slice_before { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0, 1, 2], [3, 4, 5]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_before { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_before { |(key, value)| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_before { |(key, value)| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_before { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_slice_before { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_slice_before { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.slice_before { |key, value| value == :success }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.slice_before { |key, value| value == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.slice_before { |status| status == :success }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_slice_before { |key, value| value == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_slice_before { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_slice_when" do
        specify do
          # NOTE: Empty collection.
          expect([].slice_when { |number| number % 3 == 0 }.to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_slice_when { |key, value| value <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((0...0)).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [])

          ##
          # HACK: JRuby has different exception message comparing to CRuby.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: No block.
            expect { [0, 1, 2, 3, 4, 5].slice_when.to_a }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
            expect { service.service_aware_enumerable((0..5)).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("missing block")
          else
            # NOTE: No block.
            expect { [0, 1, 2, 3, 4, 5].slice_when.to_a }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
            expect { service.service_aware_enumerable((0..5)).service_aware_slice_when.result }.to raise_error(ArgumentError).with_message("tried to create Proc object without a block")
          end

          # NOTE: Block with one argument.
          expect([0, 1, 2, 3, 4, 5].slice_when { |number| number % 3 == 0 }.to_a).to eq([[0], [1, 2, 3], [4, 5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).slice_when { |(key, value)| value % 3 == 0 }.result).to be_success.with_data(values: [[[0, 0]], [[1, 1], [2, 2], [3, 3]], [[4, 4], [5, 5]]])
          expect(service.service_aware_enumerable((0..5)).slice_when { |number| number % 3 == 0 }.result).to be_success.with_data(values: [[0], [1, 2, 3], [4, 5]])

          # NOTE: Block with multiple arguments.
          expect([0, 1, 2, 3, 4, 5].slice_when { |number, other_number| (number + other_number) % 3 == 0 }.to_a).to eq([[0, 1], [2, 3, 4], [5]])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).slice_when { |(key, value), (other_key, other_value)| (value + other_value) % 3 == 0 }.result).to be_success.with_data(values: [[[0, 0], [1, 1]], [[2, 2], [3, 3], [4, 4]], [[5, 5]]])
          expect(service.service_aware_enumerable((0..5)).slice_when { |number, other_number| (number + other_number) % 3 == 0 }.result).to be_success.with_data(values: [[0, 1], [2, 3, 4], [5]])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_when { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_when { |(key, value)| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success], [:success], [:success]])
          expect(service.service_aware_enumerable(set([:success])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])
          expect(service.service_aware_enumerable({success: :success}).service_aware_slice_when { |(key, value)| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[[:success, :success]]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_slice_when { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success]])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_slice_when { |(key, value)| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect((:error..:error).slice_when { raise }.to_a).to eq([[:error]])
          expect(service.service_aware_enumerable((:error..:error)).service_aware_slice_when { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [[:error]])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_slice_when { |key, value| value == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_slice_when { |key, value| value == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_slice_when { |status| status == :success }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_slice_when { |key, value| value == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_slice_when { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_sort" do
        specify do
          # NOTE: Empty collection.
          expect([].sort { |number, other_number| number <=> other_number }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([3, 2, 4, 5, 1].sort.to_a).to eq([1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_sort.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Block.
          expect([3, 2, 4, 5, 1].sort { |number, other_number| number <=> other_number }).to eq([1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).sort { |number, other_number| number <=> other_number }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Step with no outputs.

          expect { service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)
          expect { service.service_aware_enumerable((1..5)).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }] }.result }.to raise_error(NoMethodError).with_message(/undefined method ['`]>' for true/)

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")
          expect { service.service_aware_enumerable((1..5)).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: [:integer, :operator] }.result }.to raise_error(TypeError).with_message("no implicit conversion of Integer into Hash")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data

          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_error.without_data
          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_sort { |hash, other_hash| step compare_numbers_service, in: [number: -> { hash.last }, other_number: -> { other_hash.last }], out: :integer }.result).to be_error.without_data
          expect((-1..-1).sort).to eq([-1])
          expect(service.service_aware_enumerable((-1..-1)).service_aware_sort { |number, other_number| step compare_numbers_service, in: [number: -> { number }, other_number: -> { other_number }], out: :integer }.result).to be_success.with_data(values: [-1])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_sort.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_sort.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_sort.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_sort.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_sort_by" do
        specify do
          # NOTE: Empty collection.
          expect([].sort_by { |number| number.to_s.ord }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([3, 2, 4, 5, 1].sort_by.to_a).to eq([3, 2, 4, 5, 1])

          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort_by.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort_by.result).to be_success.with_data(values: [[3, 3], [2, 2], [4, 4], [5, 5], [1, 1]])
          expect(service.service_aware_enumerable((1..5)).service_aware_sort_by.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Block.
          expect([3, 2, 4, 5, 1].sort_by { |number| number.to_s.ord }).to eq([1, 2, 3, 4, 5])

          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).sort_by { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator((5..1).step(-1)).sort_by { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [3, 2, 4, 5, 1])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort_by { |key, value| step number_service, in: [number: -> { value }] }.result).to be_success.with_data(values: [[3, 3], [2, 2], [4, 4], [5, 5], [1, 1]])
          expect(service.service_aware_enumerable((1..5)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator((5..1).step(-1)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [5, 4, 3, 2, 1])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort_by { |key, value| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]])
          expect(service.service_aware_enumerable((1..5)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])
          expect(service.service_aware_enumerator((5..1).step(-1)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3, 4, 5])

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(lazy_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator(chain_enumerator([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable([3, 2, 4, 5, 1]).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable(set([3, 2, 4, 5, 1])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable({3 => 3, 2 => 2, 4 => 4, 5 => 5, 1 => 1}).service_aware_sort_by { |key, value| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerable((1..5)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")
          expect { service.service_aware_enumerator((5..1).step(-1)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(ArgumentError).with_message("comparison of Hash with Hash failed")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_sort_by { |key, value| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_sort_by { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_sort_by.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_error.without_data

          ##
          # HACK: For some reason `Enumerator::Lazy#sort_by` returns just `Enumerator` on JRuby, not `Enumerator::Lazy` as in CRuby.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Failure propagation.
            expect([1, 2, 3].lazy.sort_by).to be_instance_of(Enumerator)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_success.with_data(values: [])
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
          else
            # NOTE: Failure propagation.
            expect([1, 2, 3].lazy.sort_by).to be_instance_of(Enumerator::Lazy)

            # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_sort_by.result).to be_failure.without_data
            # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_sort_by.result).to be_failure.without_data
          end

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_sort_by.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_sum" do
        specify do
          # NOTE: Empty collection.
          expect([].sum).to eq(0)

          expect(service.service_aware_enumerable(enumerable([])).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(enumerator([])).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable([]).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable({}).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((:success...:success)).service_aware_sum.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable(set([])).service_aware_sum.result).to be_success.with_data(value: 0)

          # NOTE: No block, no n.
          expect([1, 2, 3, 4, 5].sum).to eq(15)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_sum.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_sum.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_sum.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_sum.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_sum.result).to be_success.with_data(value: 15)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_sum.result).to be_success.with_data(value: 15)
          expect { {1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}.sum }.to raise_error(TypeError).with_message("Array can't be coerced into Integer")
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_sum.result }.to raise_error(TypeError).with_message("Array can't be coerced into Integer")
          expect(service.service_aware_enumerable((1..5)).service_aware_sum.result).to be_success.with_data(value: 15)

          # NOTE: Block, no n.
          expect([1, 2, 3, 4, 5].sum { |number| -number }).to eq(-15)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).sum { |number| -number }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).sum { |key, value| -value }.result).to be_success.with_data(value: -15)
          expect(service.service_aware_enumerable((1..5)).sum { |number| -number }.result).to be_success.with_data(value: -15)

          # NOTE: Block, n.
          expect([1, 2, 3, 4, 5].sum(15) { |number| -number }).to eq(0)

          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).sum(15) { |key, value| -value }.result).to be_success.with_data(value: 0)
          expect(service.service_aware_enumerable((1..5)).sum(15) { |number| -number }.result).to be_success.with_data(value: 0)

          # NOTE: Step with no outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_sum { |(key, value)| step number_service, in: [number: -> { value }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")
          expect { service.service_aware_enumerable((1..5)).service_aware_sum { |number| step number_service, in: [number: -> { number }] }.result }.to raise_error(TypeError).with_message("true can't be coerced into Integer")

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_sum { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(value: 255)
          expect(service.service_aware_enumerable((1..5)).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(value: 255)

          # NOTE: Step with multiple outputs.
          expect { service.service_aware_enumerable(enumerable([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerator(enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerator(chain_enumerator([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerable([1, 2, 3, 4, 5]).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerable(set([1, 2, 3, 4, 5])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_sum { |(key, value)| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")
          expect { service.service_aware_enumerable((1..5)).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result }.to raise_error(TypeError).with_message("Hash can't be coerced into Integer")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable({-1 => -1, :exception => :exception}).service_aware_sum { |(key, value)| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_sum { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([1, -1, :exception])).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1, -1, :exception])).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1, -1, :exception])).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1, -1, :exception])).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerable([1, -1, :exception]).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1, -1, :exception])).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerable({1 => 1, -1 => -1, :exception => :exception}).service_aware_select { |key, value| step number_service, in: [number: -> { value }] }.service_aware_sum.result).to be_error.without_data
          expect(service.service_aware_enumerable((-1..-1)).service_aware_select { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([0, 0, 0])).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([0, 0, 0])).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([0, 0, 0])).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([0, 0, 0])).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([0, 0, 0]).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([0])).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({0 => 0}).service_aware_select_exactly(2) { |key, value| step number_service, in: [number: -> { value }] }.service_aware_sum.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((0..0)).service_aware_select_exactly(2) { |number| step number_service, in: [number: -> { number }] }.service_aware_sum.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_sum.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#take" do
        specify do
          # NOTE: Empty collection.
          expect([].take(2)).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).take(2).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).take(2).result).to be_success.with_data(values: [])

          # NOTE: 0.
          expect([:success, :success, :failure, :failure].take(0)).to eq([])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :failure])).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :failure])).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :failure])).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :failure])).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([:success, :success, :failure, :failure]).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([:success, :failure])).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).take(0).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success..:success)).take(0).result).to be_success.with_data(values: [])

          # NOTE: n.
          expect([:success, :success, :failure, :failure].take(2)).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :failure])).take(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :failure])).take(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :failure])).take(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :failure])).take(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure, :failure]).take(2).result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).take(1).result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).take(1).result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).take(1).result).to be_success.with_data(values: [:success])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.take(2).result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.take(2).result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take(2).result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_take(2).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_take_while" do
        specify do
          # NOTE: Empty collection.
          expect([].take_while { |number| number <= 2 }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_take_while { |key, value| value <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((0...0)).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([0, 1, 2, 3, 4, 5].take_while.to_a).to eq([0])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).service_aware_take_while.result).to be_success.with_data(values: [0])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).service_aware_take_while.result).to be_success.with_data(values: [0])
          expect { service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).service_aware_take_while.result }.to raise_error(ArgumentError).with_message("tried to call lazy take_while without a block")
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).service_aware_take_while.result).to be_success.with_data(values: [0])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).service_aware_take_while.result).to be_success.with_data(values: [0])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).service_aware_take_while.result).to be_success.with_data(values: [0])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).service_aware_take_while.result).to be_success.with_data(values: [[0, 0]])
          expect(service.service_aware_enumerable((0..5)).service_aware_take_while.result).to be_success.with_data(values: [0])

          # NOTE: Block.
          expect([0, 1, 2, 3, 4, 5].take_while { |number| number <= 2 }).to eq([0, 1, 2])

          expect(service.service_aware_enumerable(enumerable([0, 1, 2, 3, 4, 5])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerator(enumerator([0, 1, 2, 3, 4, 5])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 2, 3, 4, 5])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerator(chain_enumerator([0, 1, 2, 3, 4, 5])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerable([0, 1, 2, 3, 4, 5]).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerable(set([0, 1, 2, 3, 4, 5])).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}).take_while { |key, value| value <= 2 }.result).to be_success.with_data(values: [[0, 0], [1, 1], [2, 2]])
          expect(service.service_aware_enumerable((0..5)).take_while { |number| number <= 2 }.result).to be_success.with_data(values: [0, 1, 2])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_take_while { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_take_while { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_take_while { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :success, :failure, :exception]).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure, exception: :exception}).service_aware_take_while { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_take_while { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_take_while { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_take_while { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.take_while { |key, value| value == :success }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.take_while { |key, value| value == :success }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.take_while { |status| status == :success }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_take_while { |key, value| value == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_take_while { |status| status == :success }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#tally" do
        specify do
          # NOTE: Empty collection.
          expect([].tally).to eq({})

          expect(service.service_aware_enumerable(enumerable([])).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(enumerator([])).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(lazy_enumerator([])).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(chain_enumerator([])).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable([]).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable({}).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).tally.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable(set([])).tally.result).to be_success.with_data(values: {})

          ##
          # HACK: For some reason `(1..3)).tally` returns `{nil => 3}` in JRuby.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # NOTE: Not empty collection.
            expect([1, 2, 2, 3, 3, 3].tally).to eq({1 => 1, 2 => 2, 3 => 3})

            expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerable(set([1, 2, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 1, 3 => 1})
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).tally.result).to be_success.with_data(values: {[1, 1] => 1, [2, 2] => 1, [3, 3] => 1})
            expect(service.service_aware_enumerable((1..3)).tally.result).to be_success.with_data(values: {nil => 3})
          else
            # NOTE: Not empty collection.
            expect([1, 2, 2, 3, 3, 3].tally).to eq({1 => 1, 2 => 2, 3 => 3})

            expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).tally.result).to be_success.with_data(values: {1 => 1, 2 => 2, 3 => 3})
            expect(service.service_aware_enumerable(set([1, 2, 3])).tally.result).to be_success.with_data(values: {1 => 1, 2 => 1, 3 => 1})
            expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).tally.result).to be_success.with_data(values: {[1, 1] => 1, [2, 2] => 1, [3, 3] => 1})
            expect(service.service_aware_enumerable((1..3)).tally.result).to be_success.with_data(values: {1 => 1, 2 => 1, 3 => 1})
          end

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_error.without_data

          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.tally.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.tally.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.tally.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_tally.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_to_a" do
        specify do
          # NOTE: Empty collection.
          expect([].to_a).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).service_aware_to_a.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_to_a.result).to be_success.with_data(values: [])

          # NOTE: Not empty collection.
          expect([:success, :success, :success].to_a).to eq([:success, :success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_to_a.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_to_a.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_to_a.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_to_a.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_to_a.result).to be_success.with_data(values: [:success, :success, :success])
          expect(service.service_aware_enumerable(set([:success])).service_aware_to_a.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success}).service_aware_to_a.result).to be_success.with_data(values: [[:success, :success]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_to_a.result).to be_success.with_data(values: [:success])

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_a.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_a.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_a.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_to_a.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_to_h" do
        specify do
          # NOTE: Empty collection.
          expect([].to_h).to eq({})

          expect(service.service_aware_enumerable(enumerable([])).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(enumerator([])).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable([]).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable(set([])).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable({}).service_aware_to_h.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_to_h.result).to be_success.with_data(values: {})

          # NOTE: Not empty collection.
          expect([[0, 0], [1, 1], [2, 2]].to_h).to eq({0 => 0, 1 => 1, 2 => 2})

          expect(service.service_aware_enumerable(enumerable([[0, 0], [1, 1], [2, 2]])).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerator(enumerator([[0, 0], [1, 1], [2, 2]])).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerator(lazy_enumerator([[0, 0], [1, 1], [2, 2]])).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerator(chain_enumerator([[0, 0], [1, 1], [2, 2]])).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerable([[0, 0], [1, 1], [2, 2]]).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerable(set([[0, 0], [1, 1], [2, 2]])).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})
          expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_to_h.result).to be_success.with_data(values: {0 => 0, 1 => 1, 2 => 2})

          expect { (:success..:success).to_h }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { ([:success, :success]..[:success, :success]).to_h }.to raise_error(TypeError).with_message("can't iterate from Array")
          expect { service.service_aware_enumerable((:success..:success)).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { service.service_aware_enumerable(([:success, :success]..[:success, :success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("can't iterate from Array")

          # # NOTE: Not empty collection.
          expect { [:success, :success, :success].to_h }.to raise_error(TypeError).with_message("wrong element type Symbol at 0 (expected array)")
          expect { service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect { service.service_aware_enumerable([:success, :success, :success]).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol at 0 (expected array)")
          expect { service.service_aware_enumerable(set([:success])).service_aware_to_h.result }.to raise_error(TypeError).with_message("wrong element type Symbol (expected array)")
          expect(service.service_aware_enumerable({success: :success}).service_aware_to_h.result).to be_success.with_data(values: {success: :success})

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([[:success, :success], [:error, :error], [:exception, :exception]])).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([[:success, :success], [:error, :error], [:exception, :exception]])).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([[:success, :success], [:error, :error], [:exception, :exception]])).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([[:success, :success], [:error, :error], [:exception, :exception]])).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerable([[:success, :success], [:error, :error], [:exception, :exception]]).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([[:success, :success], [:error, :error], [:exception, :exception]])).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_h.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([[:failure, :failure], [:failure, :failure], [:failure, :failure]])).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([[:failure, :failure], [:failure, :failure], [:failure, :failure]])).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([[:failure, :failure], [:failure, :failure], [:failure, :failure]])).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([[:failure, :failure], [:failure, :failure], [:failure, :failure]])).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([[:failure, :failure], [:failure, :failure], [:failure, :failure]]).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([[:failure, :failure]])).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.to_h.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([[:success, :success], [:exception, :exception], [:exception, :exception]])).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([[:success, :success], [:exception, :exception], [:exception, :exception]])).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([[:success, :success], [:exception, :exception], [:exception, :exception]])).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([[:success, :success], [:exception, :exception], [:exception, :exception]])).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([[:success, :success], [:exception, :exception], [:exception, :exception]]).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([[:success, :success], [:exception, :exception], [:exception, :exception]])).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_to_h.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_to_set" do
        specify do
          # NOTE: Empty collection.
          expect([].to_set).to eq(Set.new([]))

          expect(service.service_aware_enumerable(enumerable([])).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerator(enumerator([])).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerable([]).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerable({}).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerable((:success...:success)).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))
          expect(service.service_aware_enumerable(set([])).service_aware_to_set.result).to be_success.with_data(values: Set.new([]))

          # NOTE: Not empty collection.
          expect([:success, :success, :success].to_set).to eq(Set.new([:success]))

          expect(service.service_aware_enumerable(enumerable([:success, :success, :success])).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerator(enumerator([:success, :success, :success])).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :success, :success])).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerator(chain_enumerator([:success, :success, :success])).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerable([:success, :success, :success]).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerable(set([:success])).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))
          expect(service.service_aware_enumerable({success: :success}).service_aware_to_set.result).to be_success.with_data(values: Set.new([[:success, :success]]))
          expect(service.service_aware_enumerable((:success..:success)).service_aware_to_set.result).to be_success.with_data(values: Set.new([:success]))

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_set.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_to_set.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_to_set.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_to_set.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_uniq" do
        specify do
          # NOTE: Empty collection.
          expect([].uniq { |number| number.to_s.ord }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_uniq { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:success...:success)).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [])

          # NOTE: No block.
          expect([1, 2, 2, 3, 3, 3].uniq.to_a).to eq([1, 2, 3])

          expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_uniq.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..3)).service_aware_uniq.result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Block.
          expect([1, 2, 2, 3, 3, 3].uniq { |number| number.to_s.ord }).to eq([1, 2, 3])

          expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1, 2, 2, 3, 3, 3])).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).uniq { |key, value| value.to_s.ord }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..3)).uniq { |number| number.to_s.ord }.result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_uniq { |key, value| step number_service, in: [number: -> { value }] }.result).to be_success.with_data(values: [[1, 1]])
          expect(service.service_aware_enumerable((1..3)).service_aware_uniq { |number| step number_service, in: [number: -> { number }] }.result).to be_success.with_data(values: [1])

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_uniq { |key, value| step number_service, in: [number: -> { value }], out: :number_code }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..3)).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: :number_code }.result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Step with multiple outputs.
          # bb

          expect(service.service_aware_enumerable(enumerable([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(lazy_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerator(chain_enumerator([1, 2, 2, 3, 3, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable([1, 2, 2, 3, 3, 3]).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])
          expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_uniq { |key, value| step number_service, in: [number: -> { value }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
          expect(service.service_aware_enumerable((1..3)).service_aware_uniq { |number| step number_service, in: [number: -> { number }], out: [:number_string, :number_code] }.result).to be_success.with_data(values: [1, 2, 3])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_uniq { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_uniq { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.uniq { |key, value| status_condition[value] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.uniq { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.uniq { |status| status_condition[status] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_uniq { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_uniq { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_zip" do
        specify do
          # NOTE: Empty collection.
          expect([].zip([2])).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_zip([2]).result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((1...1)).service_aware_zip([2]).result).to be_success.with_data(values: [])

          # No argument, no block.
          expect([1].zip).to eq([[1]])
          expect({1 => 1}.zip).to eq([[[1, 1]]])

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerable([1]).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerable(set([1])).service_aware_zip.result).to be_success.with_data(values: [[1]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip.result).to be_success.with_data(values: [[[1, 1]]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip.result).to be_success.with_data(values: [[[1, 1]]])
          expect(service.service_aware_enumerable((1..1)).service_aware_zip.result).to be_success.with_data(values: [[1]])

          # One argument, no block.
          expect([1].zip([2])).to eq([[1, 2]])
          expect({1 => 1}.zip([2])).to eq([[[1, 1], 2]])
          expect({1 => 1}.zip({2 => 2})).to eq([[[1, 1], [2, 2]]])

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerable([1]).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip([2]).result).to be_success.with_data(values: [[[1, 1], 2]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({2 => 2}).result).to be_success.with_data(values: [[[1, 1], [2, 2]]])
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([2]).result).to be_success.with_data(values: [[1, 2]])

          # Multiple arguments, no block.
          expect([1].zip([2], [3])).to eq([[1, 2, 3]])
          expect({1 => 1}.zip([2], [3])).to eq([[[1, 1], 2, 3]])
          expect({1 => 1}.zip({2 => 2}, {3 => 3})).to eq([[[1, 1], [2, 2], [3, 3]]])

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerable([1]).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[[1, 1], 2, 3]])
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({2 => 2}, {3 => 3}).result).to be_success.with_data(values: [[[1, 1], [2, 2], [3, 3]]])
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([2], [3]).result).to be_success.with_data(values: [[1, 2, 3]])

          ##
          # HACK: JRuby and CRuby does not have the same behaviour for `zip`. JRuby passes the whole array to block, while CRuby passes only one element.
          #
          if ConvenientService::Dependencies.ruby.match?("jruby < 10.1")
            # No argument, block.
            expect([1].zip { |array| raise if array.sum != 1 }).to eq(nil)
            expect(lazy_enumerator([1]).zip { |integer| raise if integer.sum != 1 }).to eq(nil)
            expect(set([1]).zip { |integer| raise if integer.sum != 1 }).to eq(nil)
            expect({1 => 1}.zip { |array| raise if array.map(&:sum).sum != 2 }).to eq(nil)
            expect((1..1).zip { |integer| raise if integer.sum != 1 }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([1])).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(enumerator([1])).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(lazy_enumerator([1])).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(chain_enumerator([1])).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable([1]).zip { |array| raise if array.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable(set([1])).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable({1 => 1}).zip { |array| raise if array.map(&:sum).sum != 2 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable((1..1)).zip { |integer| raise if integer.sum != 1 }.result).to be_success.with_data(value: nil)
          else
            # No argument, block.
            expect([1].zip { |array| raise if array.sum != 1 }).to eq(nil)
            expect(lazy_enumerator([1]).zip { |integer| raise if integer != 1 }).to eq(nil)
            expect(set([1]).zip { |integer| raise if integer != 1 }).to eq(nil)
            expect({1 => 1}.zip { |array| raise if array.sum != 2 }).to eq(nil)
            expect((1..1).zip { |integer| raise if integer != 1 }).to eq(nil)

            expect(service.service_aware_enumerable(enumerable([1])).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(enumerator([1])).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(lazy_enumerator([1])).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerator(chain_enumerator([1])).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable([1]).zip { |array| raise if array.sum != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable(set([1])).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable({1 => 1}).zip { |array| raise if array.flatten.sum != 2 }.result).to be_success.with_data(value: nil)
            expect(service.service_aware_enumerable((1..1)).zip { |integer| raise if integer != 1 }.result).to be_success.with_data(value: nil)
          end

          # One argument, block.
          expect([1].zip([2]) { |array| raise if array.sum != 3 }).to eq(nil)
          expect(set([1]).zip([2]) { |array| raise if array.sum != 3 }).to eq(nil)
          expect({1 => 1}.zip([2]) { |array| raise if array.flatten.sum != 4 }).to eq(nil)
          expect({1 => 1}.zip({2 => 2}) { |array| raise if array.flatten.sum != 6 }).to eq(nil)
          expect((1..1).zip([2]) { |array| raise if array.sum != 3 }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([1])).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([1])).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([1])).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([1]).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([1])).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).zip([2]) { |array| raise if array.flatten.sum != 4 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).zip({2 => 2}) { |array| raise if array.flatten.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((1..1)).zip([2]) { |array| raise if array.sum != 3 }.result).to be_success.with_data(value: nil)

          # Multiple arguments, block.
          expect([1].zip([2], [3]) { |array| raise if array.sum != 6 }).to eq(nil)
          expect(set([1]).zip([2], [3]) { |array| raise if array.sum != 6 }).to eq(nil)
          expect({1 => 1}.zip([2], [3]) { |array| raise if array.flatten.sum != 7 }).to eq(nil)
          expect({1 => 1}.zip({2 => 2}, {3 => 3}) { |array| raise if array.flatten.sum != 12 }).to eq(nil)
          expect((1..1).zip([2], [3]) { |array| raise if array.sum != 6 }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([1])).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([1])).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([1])).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([1]).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([1])).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).zip([2], [3]) { |array| raise if array.flatten.sum != 7 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).zip({2 => 2}, {3 => 3}) { |array| raise if array.flatten.sum != 12 }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((1..1)).zip([2], [3]) { |array| raise if array.sum != 6 }.result).to be_success.with_data(value: nil)

          # Step with no outputs.
          expect([1].zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }).to eq(nil)
          expect(set([1]).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }).to eq(nil)
          expect((1..1).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([1]).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({2 => 2}, {3 => 3}) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }] }.result).to be_success.with_data(value: nil)

          # Step with one output.
          expect([1].zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }).to eq(nil)
          expect(set([1]).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }).to eq(nil)
          expect((1..1).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([1]).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({2 => 2}, {3 => 3}) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: :number_strings }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: :number_strings }.result).to be_success.with_data(value: nil)

          # Step with multiple outputs.
          expect([1].zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }).to eq(nil)
          expect(set([1]).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }).to eq(nil)
          expect((1..1).zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable([1]).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({2 => 2}, {3 => 3}) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([2], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_success.with_data(value: nil)

          # NOTE: Error result.
          expect([1].zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }).to eq(nil)
          expect(set([1]).zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }).to eq(nil)

          expect(service.service_aware_enumerable(enumerable([1])).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([1])).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([1])).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([1])).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([1]).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([1])).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({1 => 1}).service_aware_zip({-1 => -1}, {3 => 3}) { |numbers| step numbers_service, in: [numbers: -> { numbers.flatten }], out: [:number_strings, :number_codes] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((1..1)).service_aware_zip([-1], [3]) { |numbers| step numbers_service, in: [numbers: -> { numbers }], out: [:number_strings, :number_codes] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_zip([2], [3]).result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_zip([2], [3]).result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.zip([2], [3]).result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.zip([2], [3]).result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_zip([2], [3]).result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_zip([2], [3]) }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_with_index" do
        specify do
          # NOTE: Empty collection, no n.
          expect([].select.with_index { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_select.with_index { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])

          # NOTE: Empty collection, n.
          expect([].select.with_index { |status| status_condition[status] }).to eq([])

          expect(service.service_aware_enumerable(enumerable([])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(enumerator([])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable([]).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable(set([])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({}).service_aware_select.with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success...:success)).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])

          # NOTE: No block, no n.
          expect([:success, :failure, :success, :failure].select.with_index.to_a).to eq([[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1], [:success, 2], [:failure, 3]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0], [:failure, 1]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[[:success, :success], 0], [[:failure, :failure], 1]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index.result).to be_success.with_data(values: [[:success, 0]])

          # NOTE: No block, n.
          expect([:success, :failure, :success, :failure].select.with_index(1).to_a).to eq([[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2], [:success, 3], [:failure, 4]])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1], [:failure, 2]])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[[:success, :success], 1], [[:failure, :failure], 2]])
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index(1).result).to be_success.with_data(values: [[:success, 1]])

          # NOTE: Block, no n.
          expect([:success, :failure, :success, :failure].select.with_index { |status, index| status_condition[status] && number_condition[index] }).to eq([:success])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.with_index { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])

          # NOTE: Block, n.
          expect([:success, :failure, :success, :failure].select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }).to eq([:success, :success])

          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs, no n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with no outputs, n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index(1) { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output, no n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with one output, n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index(1) { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: :status_string }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs, no n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Step with multiple outputs, n.
          expect(service.service_aware_enumerable(enumerable([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerator(enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :failure, :success, :failure])).service_aware_each.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :failure, :success, :failure])
          expect(service.service_aware_enumerator(chain_enumerator([:success, :failure, :success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable([:success, :failure, :success, :failure]).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success, :success])
          expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable({success: :success, failure: :failure}).service_aware_select.service_aware_with_index(1) { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
          expect(service.service_aware_enumerable((:success..:success)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
          expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [])

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_each.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select.service_aware_with_index(1) { |(key, value), index| step status_with_number_service, in: [status: -> { value }, number: -> { index }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_select.service_aware_with_index(1) { |status, index| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_select.with_index { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
          # expect { service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
          # expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_with_number_service, in: [status: -> { value }, number: -> { index }] }.select { |key, value| status_condition[value] }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_with_number_service, in: [status: -> { status }, number: -> { index }] }.service_aware_select { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_select.service_aware_with_index { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_select.with_index { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      describe "#service_aware_with_object" do
        specify do
          # NOTE: Empty collection.
          expect([].each.with_object("") { |string, object| concat_strings(object, string) }).to eq("")
          expect(chain_enumerator([]).each.with_object("") { |string, object| concat_strings(object, string) }).to eq("")

          expect(service.service_aware_enumerable(enumerable([])).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerator(enumerator([])).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerable([]).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerable(set([])).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerable({}).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
          expect(service.service_aware_enumerable((:success...:success)).service_aware_each.service_aware_with_object("") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")

          # NOTE: No block.
          expect(["0", "1", "2", "3", "4", "5"].each.with_object("").to_a).to eq([["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(chain_enumerator(["0", "1", "2", "3", "4", "5"]).each.with_object("").to_a).to eq([["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])

          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [[["0", "0"], ""], [["1", "1"], ""], [["2", "2"], ""], [["3", "3"], ""], [["4", "4"], ""], [["5", "5"], ""]])
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each.service_aware_with_object("").result).to be_success.with_data(values: [["0", ""], ["1", ""], ["2", ""], ["3", ""], ["4", ""], ["5", ""]])

          # NOTE: Block.
          expect(["0", "1", "2", "3", "4", "5"].each.with_object(+"") { |string, object| concat_strings(object, string) }).to eq("12345")

          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect(chain_enumerator(["0", "1", "2", "3", "4", "5"]).each.with_object(+"") { |string, object| concat_strings(object, string) }).to eq("12345")
          expect(service.service_aware_enumerator(chain_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")
          expect({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}.each.with_object(+"") { |(key, value), object| concat_strings(object, value) }).to eq("12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each.with_object(+"") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each.with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12345")

          # NOTE: Step with no outputs.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each.service_aware_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_success.with_data(value: "12345")

          # NOTE: Step with one output.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each.service_aware_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }], out: :concatenation }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: :concatenation }.result).to be_success.with_data(value: "12345")

          # NOTE: Step with multiple outputs.
          expect(service.service_aware_enumerable(enumerable(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(["0", "1", "2", "3", "4", "5"]).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(set(["0", "1", "2", "3", "4", "5"])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable({"0" => "0", "1" => "1", "2" => "2", "3" => "3", "4" => "4", "5" => "5"}).service_aware_each.service_aware_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")
          expect(service.service_aware_enumerable(("0".."5")).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }], out: [:concatenation, :operator] }.result).to be_success.with_data(value: "12345")

          # NOTE: Error result.
          expect(service.service_aware_enumerable(enumerable(["0", "-1", :exception])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator(["0", "-1", :exception])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator(["0", "-1", :exception])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(["0", "-1", :exception]).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set(["0", "-1", :exception])).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable({"0" => "0", "-1" => "-1", :exception => :exception}).service_aware_each.service_aware_with_object(+"") { |(key, value), object| step concat_strings_service, in: [string: -> { object }, other_string: -> { value }] }.result).to be_error.without_data
          expect(service.service_aware_enumerable(("-1".."-1")).service_aware_each.service_aware_with_object(+"") { |string, object| step concat_strings_service, in: [string: -> { object }, other_string: -> { string }] }.result).to be_error.without_data

          # NOTE: Error propagation.
          expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each.service_aware_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result).to be_error.without_data
          expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_error.without_data

          # NOTE: Failure propagation.
          # expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.service_aware_each.service_aware_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result).to be_failure.without_data
          # expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.service_aware_each.with_object(+"") { |status, object| object.concat(status.to_s) }.result).to be_failure.without_data

          # NOTE: Usage on terminal chaining.
          expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_each.service_aware_with_object(+"") { |(key, value), object| object.concat(status.to_s) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
          expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_each.service_aware_with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
        end
      end

      ##
      # NOTE: `select_exactly` specs are left commented intentionally. It takes too much time to add them back from brain.
      # TODO: Try to implement `select_exactly` with wrapped block again.
      #
      # describe "#step_aware_select_exactly" do
      #   specify do
      #     # NOTE: Empty collection, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: {})
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #
      #     # NOTE: Empty collection, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: Empty collection, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, no block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(0).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(0).result).to be_success.with_data(values: [])
      #
      #     # NOTE: 0 matches, no block, with_index n = 0.
      #     expect((:success...:success).service_aware_select.with_index { |status| status_condition[status] }).to eq([])
      #
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(0).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {})
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [])
      #
      #     # NOTE: 0 matches, no block, with_object n = 0.
      #     expect((:success...:success).service_aware_select.with_object(+"") { |string, object| concat_strings(object, string) }).to eq("")
      #
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(0).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(0).") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "")
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "")
      #
      #     # NOTE: 0 matches, no block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(1).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(1).result).to be_success.with_data(values: [])
      #
      #     # NOTE: 0 matches, no block, with_index, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(1).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, no block, with_object, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(1).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(1).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1"..."1")).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, no block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(2).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(2).result).to be_success.with_data(values: [])
      #
      #     # NOTE: 0 matches, no block, with_index, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(2).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, no block, with_object, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([])).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([])).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([])).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([])).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([]).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([])).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({}).service_aware_select_exactly(2).with_object(+"") { |(key, value), object| compare_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success...:success)).service_aware_select_exactly(2).with_object(+"") { |string, object| compare_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, no block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(0).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(0).result).to be_success.with_data(values: [[:success, :success]])
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(0).result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: 1 match, no block, with_index, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(0).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(0).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, no block, with_object, n = 0.
      #     expect(service.service_aware_enumerable(enumerable(["1"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator(["1"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1"])).service_aware_select_exactly(0).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(["1"]).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set(["1"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({"1" => "1"}).service_aware_select_exactly(0).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1".."1")).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, no block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(1).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(1).result).to be_success.with_data(values: [[:success, :success]])
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1).result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: 1 match, no block, with_index, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(1).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {success: :success})
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: 1 match, no block, with_object, n = 1.
      #     expect(service.service_aware_enumerable(enumerable(["1"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #     expect(service.service_aware_enumerator(enumerator(["1"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1"])).service_aware_select_exactly(1).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #     expect(service.service_aware_enumerable(["1"]).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #     expect(service.service_aware_enumerable(set(["1"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #     expect(service.service_aware_enumerable({"1" => "1"}).service_aware_select_exactly(1).") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "1")
      #     expect(service.service_aware_enumerable(("1".."1")).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "1")
      #
      #     # NOTE: 1 match, no block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(2).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(2).result).to be_success.with_data(values: [[:success, :success]])
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(2).result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: 1 match, no block, with_index, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([:success])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:success])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([:success])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:success]).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:success])).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({success: :success}).service_aware_select_exactly(2).with_index(1) { |(key, value), index| status_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(2).with_index(1) { |status, index| status_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, no block, with_object, n = 2.
      #     expect(service.service_aware_enumerable(enumerable(["1"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator(["1"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1"])).service_aware_select_exactly(2).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(["1"]).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set(["1"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({"1" => "1"}).service_aware_select_exactly(2).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1".."1")).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, no block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(0).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(0).result).to be_success.with_data(values: [[1, 1], [2, 2]])
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(0).result).to be_success.with_data(values: [1, 2])
      #
      #     # NOTE: 2 matches, no block, with_index, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(0).with_index(1) { |(key, value), index| number_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(0).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, no block, with_object, n = 0.
      #     expect(service.service_aware_enumerable(enumerable(["1", "2"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator(["1", "2"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1", "2"])).service_aware_select_exactly(0).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1", "2"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(["1", "2"]).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set(["1", "2"])).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({"1" => "1", "2" => "2"}).service_aware_select_exactly(0).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1".."2")).service_aware_select_exactly(0with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, no block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(1).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(1).result).to be_success.with_data(values: [[1, 1], [2, 2]])
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(1).result).to be_success.with_data(values: [1, 2])
      #
      #     # NOTE: 2 matches, no block, with_index, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(1).with_index(1) { |(key, value), index| number_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(1).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, no block, with_object, n = 1.
      #     expect(service.service_aware_enumerable(enumerable(["1", "2"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator(["1", "2"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1", "2"])).service_aware_select_exactly(1).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1", "2"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(["1", "2"]).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set(["1", "2"])).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({"1" => "1", "2" => "2"}).service_aware_select_exactly(1).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1".."2")).service_aware_select_exactly(1with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, no block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(2).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(2).result).to be_success.with_data(values: [[1, 1], [2, 2]])
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2])
      #
      #     # NOTE: 2 matches, no block, with_index, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([1, 2])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(enumerator([1, 2])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable([1, 2]).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable(set([1, 2])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2}).service_aware_select_exactly(2).with_index(1) { |(key, value), index| number_condition[value] && number_condition[index] }.result).to be_success.with_data(values: {1 => 1, 2 => 2})
      #     expect(service.service_aware_enumerable((1..2)).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_success.with_data(values: [1, 2])
      #
      #     # NOTE: 2 matches, no block, with_object, n = 2.
      #     expect(service.service_aware_enumerable(enumerable(["1", "2"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #     expect(service.service_aware_enumerator(enumerator(["1", "2"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1", "2"])).service_aware_select_exactly(2).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1", "2"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #     expect(service.service_aware_enumerable(["1", "2"]).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #     expect(service.service_aware_enumerable(set(["1", "2"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #     expect(service.service_aware_enumerable({"1" => "1", "2" => "2"}).service_aware_select_exactly(2).") { |(key, value), object| concat_strings(object, value) }.result).to be_success.with_data(value: "12")
      #     expect(service.service_aware_enumerable(("1".."2")).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_success.with_data(value: "12")
      #
      #     # NOTE: 3 matches, no block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([1, 2, 3])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #     expect(service.service_aware_enumerator(enumerator([1, 2, 3])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3])).service_aware_select_exactly(2).result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #     expect(service.service_aware_enumerable([1, 2, 3]).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #     expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_select_exactly(2).result).to be_success.with_data(values: [[1, 1], [2, 2], [3, 3]])
      #     expect(service.service_aware_enumerable((1..3)).service_aware_select_exactly(2).result).to be_success.with_data(values: [1, 2, 3])
      #
      #     # NOTE: 3 matches, no block, with_index, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([1, 2, 3])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([1, 2, 3])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator([1, 2, 3])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator([1, 2, 3])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([1, 2, 3]).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([1, 2, 3])).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({1 => 1, 2 => 2, 3 => 3}).service_aware_select_exactly(2).with_index(1) { |(key, value), index| number_condition[value] && number_condition[index] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((1..3)).service_aware_select_exactly(2).with_index(1) { |status, index| number_condition[status] && number_condition[index] }.result).to be_failure.without_data
      #
      #     # NOTE: 3 matches, no block, with_object, n = 2.
      #     expect(service.service_aware_enumerable(enumerable(["1", "2", "3"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator(["1", "2", "3"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect { service.service_aware_enumerator(lazy_enumerator(["1", "2", "3"])).service_aware_select_exactly(2).with_object(+"") { |string, object| concat_strings(object, string) }.result }.to raise_error(ArgumentError).with_message("tried to call lazy select without a block")
      #     expect(service.service_aware_enumerator(chain_enumerator(["1", "2", "3"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(["1", "2", "3"]).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set(["1", "2", "3"])).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({"1" => "1", "2" => "2", "3" => "3"}).service_aware_select_exactly(2).") { |(key, value), object| concat_strings(object, value) }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(("1".."3")).service_aware_select_exactly(2with_object(+"") { |string, object| concat_strings(object, string) }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #     expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: {})
      #     expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_success.with_data(values: [])
      #
      #     # NOTE: 0 matches, block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: 0 matches, block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(0) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: 1 match, block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: {success: :success})
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1) { |status| status_condition[status] }.result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: 1 match, block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(2) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, block, n = 0.
      #     expect(service.service_aware_enumerable(enumerable([0, 1, 0, 2])).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([0, 1, 0, 2])).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 0, 2])).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([0, 1, 0, 2])).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([0, 1, 0, 2]).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((0..2)).service_aware_select_exactly(0umber_condition[number] }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, block, n = 1.
      #     expect(service.service_aware_enumerable(enumerable([0, 1, 0, 2])).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([0, 1, 0, 2])).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 0, 2])).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([0, 1, 0, 2])).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([0, 1, 0, 2]).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((0..2)).service_aware_select_exactly(1umber_condition[number] }.result).to be_failure.without_data
      #
      #     # NOTE: 2 matches, block, n = 2.
      #     expect(service.service_aware_enumerable(enumerable([0, 1, 0, 2])).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(enumerator([0, 1, 0, 2])).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 0, 2])).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerator(chain_enumerator([0, 1, 0, 2])).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable([0, 1, 0, 2]).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #     expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: {1 => 1, 2 => 2})
      #     expect(service.service_aware_enumerable((0..2)).service_aware_select_exactly(2umber_condition[number] }.result).to be_success.with_data(values: [1, 2])
      #
      #     # NOTE: n = -1.
      #     expect(service.service_aware_enumerable(enumerable([0, 1, 0, 2])).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(enumerator([0, 1, 0, 2])).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([0, 1, 0, 2])).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([0, 1, 0, 2])).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable([0, 1, 0, 2]).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable(set([0, 1, 2])).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable({0 => 0, 1 => 1, 2 => 2}).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable((0..2)).service_aware_select_exactly(-1umber_condition[number] }.result).to be_error.without_data
      #
      #     # NOTE: Step with no outputs (1 match, block, n = 1).
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:failure, :success])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(1) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_success.with_data(values: {success: :success})
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: Step with one output (1 match, block, n = 1).
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(1) { |key, value| step status_service, in: [status: -> { value }], out: :status_string }.result).to be_success.with_data(values: {success: :success})
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: :status_string }.result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: Step with multiple outputs (1 match, block, n = 1).
      #     expect(service.service_aware_enumerable(enumerable([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable([:failure, :success, :failure]).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable(set([:success, :failure])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #     expect(service.service_aware_enumerable({failure: :failure, success: :success}).service_aware_select_exactly(1) { |key, value| step status_service, in: [status: -> { value }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: {success: :success})
      #     expect(service.service_aware_enumerable((:success..:success)).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }], out: [:status_string, :status_code] }.result).to be_success.with_data(values: [:success])
      #
      #     # NOTE: Error result.
      #     expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_select_exactly(1) { |key, value| step status_service, in: [status: -> { value }] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable((:error..:error)).service_aware_select_exactly(1) { |status| step status_service, in: [status: -> { status }] }.result).to be_error.without_data
      #
      #     # NOTE: Error propagation.
      #     expect(service.service_aware_enumerable(enumerable([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable([:success, :error, :exception]).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable(set([:success, :error, :exception])).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable({success: :success, error: :error, exception: :exception}).service_aware_filter { |key, value| step status_service, in: [status: -> { value }] }.select_exactly(1) { |key, value| status_condition[value] }.result).to be_error.without_data
      #     expect(service.service_aware_enumerable((:error..:error)).service_aware_filter { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_error.without_data
      #
      #     # NOTE: Failure propagation.
      #     expect(service.service_aware_enumerable(enumerable([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(lazy_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerator(chain_enumerator([:failure, :failure, :failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable([:failure, :failure, :failure]).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable(set([:failure])).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable({failure: :failure}).service_aware_select_exactly(2) { |key, value| step status_service, in: [status: -> { value }] }.select_exactly(1) { |key, value| status_condition[value] }.result).to be_failure.without_data
      #     expect(service.service_aware_enumerable((:failure..:failure)).service_aware_select_exactly(2) { |status| step status_service, in: [status: -> { status }] }.select_exactly(1) { |status| status_condition[status] }.result).to be_failure.without_data
      #
      #     # NOTE: Usage on terminal chaining.
      #     expect { service.service_aware_enumerable(enumerable([:success, :exception, :exception])).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerator(enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerator(lazy_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerator(chain_enumerator([:success, :exception, :exception])).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerable([:success, :exception, :exception]).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerable(set([:success, :exception, :exception])).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerable({success: :success, exception: :exception}).first.service_aware_service_aware_select_exactly(1) { |key, value| status_condition[value] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #     expect { service.service_aware_enumerable((:success..:success)).first.service_aware_service_aware_select_exactly(1) { |status| status_condition[status] }.result }.to raise_error(ConvenientService::Service::Plugins::CanHaveServiceAwareEnumerables::Exceptions::AlreadyUsedTerminalChaining)
      #   end
      # end

      ##
      # TODO:
      # first(2) => [only_one] # What to do? success of failure?
      # cycle(2) => nil # What to do? success without data?
      # drop(2) => [] # What to do? success when nothing dropped?
      #
      # add not_step specs.
      # failure propagation
      #
      # check return type
      # delegate
      # select no block
      # failure and error messages
      # more reliable check than number.to_s.ord
      # review missing no block for set, hash
      # cast in zip and chain
      # add specs for not wrapped objects to ensure wrapped behaviour !!!
      # cast object
      # service_aware_find step aware default
      ##
    end
  end
end
# rubocop:enable RSpec/NestedGroups, RSpec/MultipleMemoizedHelpers, RSpec/DescribeClass, RSpec/ExampleLength, RSpec/MissingExampleGroupArgument, RSpec/MultipleExpectations
# rubocop:enable all
